"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tslib"),t=require("@liff/use"),n=require("@liff/consts"),r=require("@liff/util"),i=require("@liff/server-api"),s=navigator.language,o=null;function a(t){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return s=t,[4,u()];case 1:return e.sent(),[2]}}))}))}function u(){return e.__awaiter(this,void 0,void 0,(function(){var t,n;return e.__generator(this,(function(e){switch(e.label){case 0:return[4,i.fetch("".concat("https://liffsdk.line-scdn.net/xlt/manifest.json"),{method:"GET",headers:{Accept:"application/json"}})];case 1:return t=e.sent(),n="".concat(s),!t.languages[n]&&s.includes("-")&&(n=s.split("-")[0]),t.languages[n]||(n="en"),[4,i.fetch("".concat("https://liffsdk.line-scdn.net/xlt","/").concat(t.languages[n]),{method:"GET",headers:{Accept:"application/json"}})];case 2:return o=e.sent(),[2]}}))}))}var c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e.__extends(n,t),Object.defineProperty(n.prototype,"name",{get:function(){return"i18n"},enumerable:!1,configurable:!0}),n.prototype.install=function(e){return e.internalHooks.init.beforeFinished(this.beforeInitFinished.bind(this)),{setLang:a}},n.prototype.beforeInitFinished=function(){return e.__awaiter(this,void 0,void 0,(function(){return e.__generator(this,(function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent(),[2]}}))}))},n}(t.LiffModule),l=new c;exports.I18nModule=c,exports.module=l,exports.t=function(e){if(null===o)throw r.createLiffError(n.INIT_FAILED,"please call xlt after liff.init");return o[e]};
