var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));

// node_modules/tiny-sha256/index.js
var require_tiny_sha256 = __commonJS({
  "node_modules/tiny-sha256/index.js"(exports, module) {
    (function(global3, factory) {
      if (typeof define === "function" && define.amd) {
        define([], factory);
      } else if (typeof module !== "undefined" && module.exports) {
        module.exports = factory();
      } else {
        global3.sha256 = factory();
      }
    })(exports, function() {
      var sha256 = function sha2562(ascii) {
        function rightRotate(value, amount) {
          return value >>> amount | value << 32 - amount;
        }
        ;
        var mathPow = Math.pow;
        var maxWord = mathPow(2, 32);
        var lengthProperty = "length";
        var i6, j3;
        var result = "";
        var words = [];
        var asciiBitLength = ascii[lengthProperty] * 8;
        var hash = sha2562.h = sha2562.h || [];
        var k6 = sha2562.k = sha2562.k || [];
        var primeCounter = k6[lengthProperty];
        var isComposite = {};
        for (var candidate = 2; primeCounter < 64; candidate++) {
          if (!isComposite[candidate]) {
            for (i6 = 0; i6 < 313; i6 += candidate) {
              isComposite[i6] = candidate;
            }
            hash[primeCounter] = mathPow(candidate, 0.5) * maxWord | 0;
            k6[primeCounter++] = mathPow(candidate, 1 / 3) * maxWord | 0;
          }
        }
        ascii += "";
        while (ascii[lengthProperty] % 64 - 56)
          ascii += "\0";
        for (i6 = 0; i6 < ascii[lengthProperty]; i6++) {
          j3 = ascii.charCodeAt(i6);
          if (j3 >> 8)
            return;
          words[i6 >> 2] |= j3 << (3 - i6) % 4 * 8;
        }
        words[words[lengthProperty]] = asciiBitLength / maxWord | 0;
        words[words[lengthProperty]] = asciiBitLength;
        for (j3 = 0; j3 < words[lengthProperty]; ) {
          var w5 = words.slice(j3, j3 += 16);
          var oldHash = hash;
          hash = hash.slice(0, 8);
          for (i6 = 0; i6 < 64; i6++) {
            var i22 = i6 + j3;
            var w15 = w5[i6 - 15], w22 = w5[i6 - 2];
            var a10 = hash[0], e10 = hash[4];
            var temp1 = hash[7] + (rightRotate(e10, 6) ^ rightRotate(e10, 11) ^ rightRotate(e10, 25)) + (e10 & hash[5] ^ ~e10 & hash[6]) + k6[i6] + (w5[i6] = i6 < 16 ? w5[i6] : w5[i6 - 16] + (rightRotate(w15, 7) ^ rightRotate(w15, 18) ^ w15 >>> 3) + w5[i6 - 7] + (rightRotate(w22, 17) ^ rightRotate(w22, 19) ^ w22 >>> 10) | 0);
            var temp2 = (rightRotate(a10, 2) ^ rightRotate(a10, 13) ^ rightRotate(a10, 22)) + (a10 & hash[1] ^ a10 & hash[2] ^ hash[1] & hash[2]);
            hash = [temp1 + temp2 | 0].concat(hash);
            hash[4] = hash[4] + temp1 | 0;
          }
          for (i6 = 0; i6 < 8; i6++) {
            hash[i6] = hash[i6] + oldHash[i6] | 0;
          }
        }
        for (i6 = 0; i6 < 8; i6++) {
          for (j3 = 3; j3 + 1; j3--) {
            var b7 = hash[i6] >> j3 * 8 & 255;
            result += (b7 < 16 ? 0 : "") + b7.toString(16);
          }
        }
        return result;
      };
      sha256.code = 'var sha256=function a(b){function c(a,b){return a>>>b|a<<32-b}for(var d,e,f=Math.pow,g=f(2,32),h="length",i="",j=[],k=8*b[h],l=a.h=a.h||[],m=a.k=a.k||[],n=m[h],o={},p=2;64>n;p++)if(!o[p]){for(d=0;313>d;d+=p)o[d]=p;l[n]=f(p,.5)*g|0,m[n++]=f(p,1/3)*g|0}for(b+="\\x80";b[h]%64-56;)b+="\\x00";for(d=0;d<b[h];d++){if(e=b.charCodeAt(d),e>>8)return;j[d>>2]|=e<<(3-d)%4*8}for(j[j[h]]=k/g|0,j[j[h]]=k,e=0;e<j[h];){var q=j.slice(e,e+=16),r=l;for(l=l.slice(0,8),d=0;64>d;d++){var s=q[d-15],t=q[d-2],u=l[0],v=l[4],w=l[7]+(c(v,6)^c(v,11)^c(v,25))+(v&l[5]^~v&l[6])+m[d]+(q[d]=16>d?q[d]:q[d-16]+(c(s,7)^c(s,18)^s>>>3)+q[d-7]+(c(t,17)^c(t,19)^t>>>10)|0),x=(c(u,2)^c(u,13)^c(u,22))+(u&l[1]^u&l[2]^l[1]&l[2]);l=[w+x|0].concat(l),l[4]=l[4]+w|0}for(d=0;8>d;d++)l[d]=l[d]+r[d]|0}for(d=0;8>d;d++)for(e=3;e+1;e--){var y=l[d]>>8*e&255;i+=(16>y?0:"")+y.toString(16)}return i};';
      return sha256;
    });
  }
});

// node_modules/whatwg-fetch/fetch.js
var global2 = typeof globalThis !== "undefined" && globalThis || typeof self !== "undefined" && self || typeof global2 !== "undefined" && global2;
var support = {
  searchParams: "URLSearchParams" in global2,
  iterable: "Symbol" in global2 && "iterator" in Symbol,
  blob: "FileReader" in global2 && "Blob" in global2 && function() {
    try {
      new Blob();
      return true;
    } catch (e10) {
      return false;
    }
  }(),
  formData: "FormData" in global2,
  arrayBuffer: "ArrayBuffer" in global2
};
function isDataView(obj) {
  return obj && DataView.prototype.isPrototypeOf(obj);
}
if (support.arrayBuffer) {
  viewClasses = [
    "[object Int8Array]",
    "[object Uint8Array]",
    "[object Uint8ClampedArray]",
    "[object Int16Array]",
    "[object Uint16Array]",
    "[object Int32Array]",
    "[object Uint32Array]",
    "[object Float32Array]",
    "[object Float64Array]"
  ];
  isArrayBufferView = ArrayBuffer.isView || function(obj) {
    return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1;
  };
}
var viewClasses;
var isArrayBufferView;
function normalizeName(name) {
  if (typeof name !== "string") {
    name = String(name);
  }
  if (/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(name) || name === "") {
    throw new TypeError('Invalid character in header field name: "' + name + '"');
  }
  return name.toLowerCase();
}
function normalizeValue(value) {
  if (typeof value !== "string") {
    value = String(value);
  }
  return value;
}
function iteratorFor(items) {
  var iterator = {
    next: function() {
      var value = items.shift();
      return { done: value === void 0, value };
    }
  };
  if (support.iterable) {
    iterator[Symbol.iterator] = function() {
      return iterator;
    };
  }
  return iterator;
}
function Headers(headers) {
  this.map = {};
  if (headers instanceof Headers) {
    headers.forEach(function(value, name) {
      this.append(name, value);
    }, this);
  } else if (Array.isArray(headers)) {
    headers.forEach(function(header) {
      this.append(header[0], header[1]);
    }, this);
  } else if (headers) {
    Object.getOwnPropertyNames(headers).forEach(function(name) {
      this.append(name, headers[name]);
    }, this);
  }
}
Headers.prototype.append = function(name, value) {
  name = normalizeName(name);
  value = normalizeValue(value);
  var oldValue = this.map[name];
  this.map[name] = oldValue ? oldValue + ", " + value : value;
};
Headers.prototype["delete"] = function(name) {
  delete this.map[normalizeName(name)];
};
Headers.prototype.get = function(name) {
  name = normalizeName(name);
  return this.has(name) ? this.map[name] : null;
};
Headers.prototype.has = function(name) {
  return this.map.hasOwnProperty(normalizeName(name));
};
Headers.prototype.set = function(name, value) {
  this.map[normalizeName(name)] = normalizeValue(value);
};
Headers.prototype.forEach = function(callback, thisArg) {
  for (var name in this.map) {
    if (this.map.hasOwnProperty(name)) {
      callback.call(thisArg, this.map[name], name, this);
    }
  }
};
Headers.prototype.keys = function() {
  var items = [];
  this.forEach(function(value, name) {
    items.push(name);
  });
  return iteratorFor(items);
};
Headers.prototype.values = function() {
  var items = [];
  this.forEach(function(value) {
    items.push(value);
  });
  return iteratorFor(items);
};
Headers.prototype.entries = function() {
  var items = [];
  this.forEach(function(value, name) {
    items.push([name, value]);
  });
  return iteratorFor(items);
};
if (support.iterable) {
  Headers.prototype[Symbol.iterator] = Headers.prototype.entries;
}
function consumed(body) {
  if (body.bodyUsed) {
    return Promise.reject(new TypeError("Already read"));
  }
  body.bodyUsed = true;
}
function fileReaderReady(reader) {
  return new Promise(function(resolve2, reject2) {
    reader.onload = function() {
      resolve2(reader.result);
    };
    reader.onerror = function() {
      reject2(reader.error);
    };
  });
}
function readBlobAsArrayBuffer(blob) {
  var reader = new FileReader();
  var promise = fileReaderReady(reader);
  reader.readAsArrayBuffer(blob);
  return promise;
}
function readBlobAsText(blob) {
  var reader = new FileReader();
  var promise = fileReaderReady(reader);
  reader.readAsText(blob);
  return promise;
}
function readArrayBufferAsText(buf) {
  var view = new Uint8Array(buf);
  var chars = new Array(view.length);
  for (var i6 = 0; i6 < view.length; i6++) {
    chars[i6] = String.fromCharCode(view[i6]);
  }
  return chars.join("");
}
function bufferClone(buf) {
  if (buf.slice) {
    return buf.slice(0);
  } else {
    var view = new Uint8Array(buf.byteLength);
    view.set(new Uint8Array(buf));
    return view.buffer;
  }
}
function Body() {
  this.bodyUsed = false;
  this._initBody = function(body) {
    this.bodyUsed = this.bodyUsed;
    this._bodyInit = body;
    if (!body) {
      this._bodyText = "";
    } else if (typeof body === "string") {
      this._bodyText = body;
    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {
      this._bodyBlob = body;
    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {
      this._bodyFormData = body;
    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
      this._bodyText = body.toString();
    } else if (support.arrayBuffer && support.blob && isDataView(body)) {
      this._bodyArrayBuffer = bufferClone(body.buffer);
      this._bodyInit = new Blob([this._bodyArrayBuffer]);
    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {
      this._bodyArrayBuffer = bufferClone(body);
    } else {
      this._bodyText = body = Object.prototype.toString.call(body);
    }
    if (!this.headers.get("content-type")) {
      if (typeof body === "string") {
        this.headers.set("content-type", "text/plain;charset=UTF-8");
      } else if (this._bodyBlob && this._bodyBlob.type) {
        this.headers.set("content-type", this._bodyBlob.type);
      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {
        this.headers.set("content-type", "application/x-www-form-urlencoded;charset=UTF-8");
      }
    }
  };
  if (support.blob) {
    this.blob = function() {
      var rejected = consumed(this);
      if (rejected) {
        return rejected;
      }
      if (this._bodyBlob) {
        return Promise.resolve(this._bodyBlob);
      } else if (this._bodyArrayBuffer) {
        return Promise.resolve(new Blob([this._bodyArrayBuffer]));
      } else if (this._bodyFormData) {
        throw new Error("could not read FormData body as blob");
      } else {
        return Promise.resolve(new Blob([this._bodyText]));
      }
    };
    this.arrayBuffer = function() {
      if (this._bodyArrayBuffer) {
        var isConsumed = consumed(this);
        if (isConsumed) {
          return isConsumed;
        }
        if (ArrayBuffer.isView(this._bodyArrayBuffer)) {
          return Promise.resolve(
            this._bodyArrayBuffer.buffer.slice(
              this._bodyArrayBuffer.byteOffset,
              this._bodyArrayBuffer.byteOffset + this._bodyArrayBuffer.byteLength
            )
          );
        } else {
          return Promise.resolve(this._bodyArrayBuffer);
        }
      } else {
        return this.blob().then(readBlobAsArrayBuffer);
      }
    };
  }
  this.text = function() {
    var rejected = consumed(this);
    if (rejected) {
      return rejected;
    }
    if (this._bodyBlob) {
      return readBlobAsText(this._bodyBlob);
    } else if (this._bodyArrayBuffer) {
      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));
    } else if (this._bodyFormData) {
      throw new Error("could not read FormData body as text");
    } else {
      return Promise.resolve(this._bodyText);
    }
  };
  if (support.formData) {
    this.formData = function() {
      return this.text().then(decode);
    };
  }
  this.json = function() {
    return this.text().then(JSON.parse);
  };
  return this;
}
var methods = ["DELETE", "GET", "HEAD", "OPTIONS", "POST", "PUT"];
function normalizeMethod(method) {
  var upcased = method.toUpperCase();
  return methods.indexOf(upcased) > -1 ? upcased : method;
}
function Request(input, options) {
  if (!(this instanceof Request)) {
    throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
  }
  options = options || {};
  var body = options.body;
  if (input instanceof Request) {
    if (input.bodyUsed) {
      throw new TypeError("Already read");
    }
    this.url = input.url;
    this.credentials = input.credentials;
    if (!options.headers) {
      this.headers = new Headers(input.headers);
    }
    this.method = input.method;
    this.mode = input.mode;
    this.signal = input.signal;
    if (!body && input._bodyInit != null) {
      body = input._bodyInit;
      input.bodyUsed = true;
    }
  } else {
    this.url = String(input);
  }
  this.credentials = options.credentials || this.credentials || "same-origin";
  if (options.headers || !this.headers) {
    this.headers = new Headers(options.headers);
  }
  this.method = normalizeMethod(options.method || this.method || "GET");
  this.mode = options.mode || this.mode || null;
  this.signal = options.signal || this.signal;
  this.referrer = null;
  if ((this.method === "GET" || this.method === "HEAD") && body) {
    throw new TypeError("Body not allowed for GET or HEAD requests");
  }
  this._initBody(body);
  if (this.method === "GET" || this.method === "HEAD") {
    if (options.cache === "no-store" || options.cache === "no-cache") {
      var reParamSearch = /([?&])_=[^&]*/;
      if (reParamSearch.test(this.url)) {
        this.url = this.url.replace(reParamSearch, "$1_=" + (/* @__PURE__ */ new Date()).getTime());
      } else {
        var reQueryString = /\?/;
        this.url += (reQueryString.test(this.url) ? "&" : "?") + "_=" + (/* @__PURE__ */ new Date()).getTime();
      }
    }
  }
}
Request.prototype.clone = function() {
  return new Request(this, { body: this._bodyInit });
};
function decode(body) {
  var form = new FormData();
  body.trim().split("&").forEach(function(bytes) {
    if (bytes) {
      var split = bytes.split("=");
      var name = split.shift().replace(/\+/g, " ");
      var value = split.join("=").replace(/\+/g, " ");
      form.append(decodeURIComponent(name), decodeURIComponent(value));
    }
  });
  return form;
}
function parseHeaders(rawHeaders) {
  var headers = new Headers();
  var preProcessedHeaders = rawHeaders.replace(/\r?\n[\t ]+/g, " ");
  preProcessedHeaders.split("\r").map(function(header) {
    return header.indexOf("\n") === 0 ? header.substr(1, header.length) : header;
  }).forEach(function(line) {
    var parts = line.split(":");
    var key = parts.shift().trim();
    if (key) {
      var value = parts.join(":").trim();
      headers.append(key, value);
    }
  });
  return headers;
}
Body.call(Request.prototype);
function Response(bodyInit, options) {
  if (!(this instanceof Response)) {
    throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');
  }
  if (!options) {
    options = {};
  }
  this.type = "default";
  this.status = options.status === void 0 ? 200 : options.status;
  this.ok = this.status >= 200 && this.status < 300;
  this.statusText = options.statusText === void 0 ? "" : "" + options.statusText;
  this.headers = new Headers(options.headers);
  this.url = options.url || "";
  this._initBody(bodyInit);
}
Body.call(Response.prototype);
Response.prototype.clone = function() {
  return new Response(this._bodyInit, {
    status: this.status,
    statusText: this.statusText,
    headers: new Headers(this.headers),
    url: this.url
  });
};
Response.error = function() {
  var response = new Response(null, { status: 0, statusText: "" });
  response.type = "error";
  return response;
};
var redirectStatuses = [301, 302, 303, 307, 308];
Response.redirect = function(url, status) {
  if (redirectStatuses.indexOf(status) === -1) {
    throw new RangeError("Invalid status code");
  }
  return new Response(null, { status, headers: { location: url } });
};
var DOMException = global2.DOMException;
try {
  new DOMException();
} catch (err) {
  DOMException = function(message, name) {
    this.message = message;
    this.name = name;
    var error = Error(message);
    this.stack = error.stack;
  };
  DOMException.prototype = Object.create(Error.prototype);
  DOMException.prototype.constructor = DOMException;
}
function fetch2(input, init) {
  return new Promise(function(resolve2, reject2) {
    var request = new Request(input, init);
    if (request.signal && request.signal.aborted) {
      return reject2(new DOMException("Aborted", "AbortError"));
    }
    var xhr = new XMLHttpRequest();
    function abortXhr() {
      xhr.abort();
    }
    xhr.onload = function() {
      var options = {
        status: xhr.status,
        statusText: xhr.statusText,
        headers: parseHeaders(xhr.getAllResponseHeaders() || "")
      };
      options.url = "responseURL" in xhr ? xhr.responseURL : options.headers.get("X-Request-URL");
      var body = "response" in xhr ? xhr.response : xhr.responseText;
      setTimeout(function() {
        resolve2(new Response(body, options));
      }, 0);
    };
    xhr.onerror = function() {
      setTimeout(function() {
        reject2(new TypeError("Network request failed"));
      }, 0);
    };
    xhr.ontimeout = function() {
      setTimeout(function() {
        reject2(new TypeError("Network request failed"));
      }, 0);
    };
    xhr.onabort = function() {
      setTimeout(function() {
        reject2(new DOMException("Aborted", "AbortError"));
      }, 0);
    };
    function fixUrl(url) {
      try {
        return url === "" && global2.location.href ? global2.location.href : url;
      } catch (e10) {
        return url;
      }
    }
    xhr.open(request.method, fixUrl(request.url), true);
    if (request.credentials === "include") {
      xhr.withCredentials = true;
    } else if (request.credentials === "omit") {
      xhr.withCredentials = false;
    }
    if ("responseType" in xhr) {
      if (support.blob) {
        xhr.responseType = "blob";
      } else if (support.arrayBuffer && request.headers.get("Content-Type") && request.headers.get("Content-Type").indexOf("application/octet-stream") !== -1) {
        xhr.responseType = "arraybuffer";
      }
    }
    if (init && typeof init.headers === "object" && !(init.headers instanceof Headers)) {
      Object.getOwnPropertyNames(init.headers).forEach(function(name) {
        xhr.setRequestHeader(name, normalizeValue(init.headers[name]));
      });
    } else {
      request.headers.forEach(function(value, name) {
        xhr.setRequestHeader(name, value);
      });
    }
    if (request.signal) {
      request.signal.addEventListener("abort", abortXhr);
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4) {
          request.signal.removeEventListener("abort", abortXhr);
        }
      };
    }
    xhr.send(typeof request._bodyInit === "undefined" ? null : request._bodyInit);
  });
}
fetch2.polyfill = true;
if (!global2.fetch) {
  global2.fetch = fetch2;
  global2.Headers = Headers;
  global2.Request = Request;
  global2.Response = Response;
}

// node_modules/promise-polyfill/src/finally.js
function finallyConstructor(callback) {
  var constructor = this.constructor;
  return this.then(
    function(value) {
      return constructor.resolve(callback()).then(function() {
        return value;
      });
    },
    function(reason) {
      return constructor.resolve(callback()).then(function() {
        return constructor.reject(reason);
      });
    }
  );
}
var finally_default = finallyConstructor;

// node_modules/promise-polyfill/src/allSettled.js
function allSettled(arr) {
  var P4 = this;
  return new P4(function(resolve2, reject2) {
    if (!(arr && typeof arr.length !== "undefined")) {
      return reject2(
        new TypeError(
          typeof arr + " " + arr + " is not iterable(cannot read property Symbol(Symbol.iterator))"
        )
      );
    }
    var args = Array.prototype.slice.call(arr);
    if (args.length === 0)
      return resolve2([]);
    var remaining = args.length;
    function res(i7, val) {
      if (val && (typeof val === "object" || typeof val === "function")) {
        var then = val.then;
        if (typeof then === "function") {
          then.call(
            val,
            function(val2) {
              res(i7, val2);
            },
            function(e10) {
              args[i7] = { status: "rejected", reason: e10 };
              if (--remaining === 0) {
                resolve2(args);
              }
            }
          );
          return;
        }
      }
      args[i7] = { status: "fulfilled", value: val };
      if (--remaining === 0) {
        resolve2(args);
      }
    }
    for (var i6 = 0; i6 < args.length; i6++) {
      res(i6, args[i6]);
    }
  });
}
var allSettled_default = allSettled;

// node_modules/promise-polyfill/src/any.js
function AggregateError(errors, message) {
  this.name = "AggregateError", this.errors = errors;
  this.message = message || "";
}
AggregateError.prototype = Error.prototype;
function any(arr) {
  var P4 = this;
  return new P4(function(resolve2, reject2) {
    if (!(arr && typeof arr.length !== "undefined")) {
      return reject2(new TypeError("Promise.any accepts an array"));
    }
    var args = Array.prototype.slice.call(arr);
    if (args.length === 0)
      return reject2();
    var rejectionReasons = [];
    for (var i6 = 0; i6 < args.length; i6++) {
      try {
        P4.resolve(args[i6]).then(resolve2).catch(function(error) {
          rejectionReasons.push(error);
          if (rejectionReasons.length === args.length) {
            reject2(
              new AggregateError(
                rejectionReasons,
                "All promises were rejected"
              )
            );
          }
        });
      } catch (ex) {
        reject2(ex);
      }
    }
  });
}
var any_default = any;

// node_modules/promise-polyfill/src/index.js
var setTimeoutFunc = setTimeout;
function isArray(x4) {
  return Boolean(x4 && typeof x4.length !== "undefined");
}
function noop() {
}
function bind(fn, thisArg) {
  return function() {
    fn.apply(thisArg, arguments);
  };
}
function Promise2(fn) {
  if (!(this instanceof Promise2))
    throw new TypeError("Promises must be constructed via new");
  if (typeof fn !== "function")
    throw new TypeError("not a function");
  this._state = 0;
  this._handled = false;
  this._value = void 0;
  this._deferreds = [];
  doResolve(fn, this);
}
function handle(self2, deferred) {
  while (self2._state === 3) {
    self2 = self2._value;
  }
  if (self2._state === 0) {
    self2._deferreds.push(deferred);
    return;
  }
  self2._handled = true;
  Promise2._immediateFn(function() {
    var cb = self2._state === 1 ? deferred.onFulfilled : deferred.onRejected;
    if (cb === null) {
      (self2._state === 1 ? resolve : reject)(deferred.promise, self2._value);
      return;
    }
    var ret;
    try {
      ret = cb(self2._value);
    } catch (e10) {
      reject(deferred.promise, e10);
      return;
    }
    resolve(deferred.promise, ret);
  });
}
function resolve(self2, newValue) {
  try {
    if (newValue === self2)
      throw new TypeError("A promise cannot be resolved with itself.");
    if (newValue && (typeof newValue === "object" || typeof newValue === "function")) {
      var then = newValue.then;
      if (newValue instanceof Promise2) {
        self2._state = 3;
        self2._value = newValue;
        finale(self2);
        return;
      } else if (typeof then === "function") {
        doResolve(bind(then, newValue), self2);
        return;
      }
    }
    self2._state = 1;
    self2._value = newValue;
    finale(self2);
  } catch (e10) {
    reject(self2, e10);
  }
}
function reject(self2, newValue) {
  self2._state = 2;
  self2._value = newValue;
  finale(self2);
}
function finale(self2) {
  if (self2._state === 2 && self2._deferreds.length === 0) {
    Promise2._immediateFn(function() {
      if (!self2._handled) {
        Promise2._unhandledRejectionFn(self2._value);
      }
    });
  }
  for (var i6 = 0, len = self2._deferreds.length; i6 < len; i6++) {
    handle(self2, self2._deferreds[i6]);
  }
  self2._deferreds = null;
}
function Handler(onFulfilled, onRejected, promise) {
  this.onFulfilled = typeof onFulfilled === "function" ? onFulfilled : null;
  this.onRejected = typeof onRejected === "function" ? onRejected : null;
  this.promise = promise;
}
function doResolve(fn, self2) {
  var done = false;
  try {
    fn(
      function(value) {
        if (done)
          return;
        done = true;
        resolve(self2, value);
      },
      function(reason) {
        if (done)
          return;
        done = true;
        reject(self2, reason);
      }
    );
  } catch (ex) {
    if (done)
      return;
    done = true;
    reject(self2, ex);
  }
}
Promise2.prototype["catch"] = function(onRejected) {
  return this.then(null, onRejected);
};
Promise2.prototype.then = function(onFulfilled, onRejected) {
  var prom = new this.constructor(noop);
  handle(this, new Handler(onFulfilled, onRejected, prom));
  return prom;
};
Promise2.prototype["finally"] = finally_default;
Promise2.all = function(arr) {
  return new Promise2(function(resolve2, reject2) {
    if (!isArray(arr)) {
      return reject2(new TypeError("Promise.all accepts an array"));
    }
    var args = Array.prototype.slice.call(arr);
    if (args.length === 0)
      return resolve2([]);
    var remaining = args.length;
    function res(i7, val) {
      try {
        if (val && (typeof val === "object" || typeof val === "function")) {
          var then = val.then;
          if (typeof then === "function") {
            then.call(
              val,
              function(val2) {
                res(i7, val2);
              },
              reject2
            );
            return;
          }
        }
        args[i7] = val;
        if (--remaining === 0) {
          resolve2(args);
        }
      } catch (ex) {
        reject2(ex);
      }
    }
    for (var i6 = 0; i6 < args.length; i6++) {
      res(i6, args[i6]);
    }
  });
};
Promise2.any = any_default;
Promise2.allSettled = allSettled_default;
Promise2.resolve = function(value) {
  if (value && typeof value === "object" && value.constructor === Promise2) {
    return value;
  }
  return new Promise2(function(resolve2) {
    resolve2(value);
  });
};
Promise2.reject = function(value) {
  return new Promise2(function(resolve2, reject2) {
    reject2(value);
  });
};
Promise2.race = function(arr) {
  return new Promise2(function(resolve2, reject2) {
    if (!isArray(arr)) {
      return reject2(new TypeError("Promise.race accepts an array"));
    }
    for (var i6 = 0, len = arr.length; i6 < len; i6++) {
      Promise2.resolve(arr[i6]).then(resolve2, reject2);
    }
  });
};
Promise2._immediateFn = // @ts-ignore
typeof setImmediate === "function" && function(fn) {
  setImmediate(fn);
} || function(fn) {
  setTimeoutFunc(fn, 0);
};
Promise2._unhandledRejectionFn = function _unhandledRejectionFn(err) {
  if (typeof console !== "undefined" && console) {
    console.warn("Possible Unhandled Promise Rejection:", err);
  }
};
var src_default = Promise2;

// node_modules/promise-polyfill/src/polyfill.js
var globalNS = function() {
  if (typeof self !== "undefined") {
    return self;
  }
  if (typeof window !== "undefined") {
    return window;
  }
  if (typeof global !== "undefined") {
    return global;
  }
  throw new Error("unable to locate global object");
}();
if (typeof globalNS["Promise"] !== "function") {
  globalNS["Promise"] = src_default;
} else {
  if (!globalNS.Promise.prototype["finally"]) {
    globalNS.Promise.prototype["finally"] = finally_default;
  }
  if (!globalNS.Promise.allSettled) {
    globalNS.Promise.allSettled = allSettled_default;
  }
  if (!globalNS.Promise.any) {
    globalNS.Promise.any = any_default;
  }
}

// node_modules/tslib/tslib.es6.js
var extendStatics = function(d7, b7) {
  extendStatics = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(d8, b8) {
    d8.__proto__ = b8;
  } || function(d8, b8) {
    for (var p12 in b8)
      if (Object.prototype.hasOwnProperty.call(b8, p12))
        d8[p12] = b8[p12];
  };
  return extendStatics(d7, b7);
};
function __extends(d7, b7) {
  if (typeof b7 !== "function" && b7 !== null)
    throw new TypeError("Class extends value " + String(b7) + " is not a constructor or null");
  extendStatics(d7, b7);
  function __() {
    this.constructor = d7;
  }
  d7.prototype = b7 === null ? Object.create(b7) : (__.prototype = b7.prototype, new __());
}
var __assign = function() {
  __assign = Object.assign || function __assign2(t2) {
    for (var s11, i6 = 1, n6 = arguments.length; i6 < n6; i6++) {
      s11 = arguments[i6];
      for (var p12 in s11)
        if (Object.prototype.hasOwnProperty.call(s11, p12))
          t2[p12] = s11[p12];
    }
    return t2;
  };
  return __assign.apply(this, arguments);
};
function __awaiter(thisArg, _arguments, P4, generator) {
  function adopt(value) {
    return value instanceof P4 ? value : new P4(function(resolve2) {
      resolve2(value);
    });
  }
  return new (P4 || (P4 = Promise))(function(resolve2, reject2) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e10) {
        reject2(e10);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e10) {
        reject2(e10);
      }
    }
    function step(result) {
      result.done ? resolve2(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
}
function __generator(thisArg, body) {
  var _6 = { label: 0, sent: function() {
    if (t2[0] & 1)
      throw t2[1];
    return t2[1];
  }, trys: [], ops: [] }, f12, y5, t2, g8;
  return g8 = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g8[Symbol.iterator] = function() {
    return this;
  }), g8;
  function verb(n6) {
    return function(v7) {
      return step([n6, v7]);
    };
  }
  function step(op) {
    if (f12)
      throw new TypeError("Generator is already executing.");
    while (g8 && (g8 = 0, op[0] && (_6 = 0)), _6)
      try {
        if (f12 = 1, y5 && (t2 = op[0] & 2 ? y5["return"] : op[0] ? y5["throw"] || ((t2 = y5["return"]) && t2.call(y5), 0) : y5.next) && !(t2 = t2.call(y5, op[1])).done)
          return t2;
        if (y5 = 0, t2)
          op = [op[0] & 2, t2.value];
        switch (op[0]) {
          case 0:
          case 1:
            t2 = op;
            break;
          case 4:
            _6.label++;
            return { value: op[1], done: false };
          case 5:
            _6.label++;
            y5 = op[1];
            op = [0];
            continue;
          case 7:
            op = _6.ops.pop();
            _6.trys.pop();
            continue;
          default:
            if (!(t2 = _6.trys, t2 = t2.length > 0 && t2[t2.length - 1]) && (op[0] === 6 || op[0] === 2)) {
              _6 = 0;
              continue;
            }
            if (op[0] === 3 && (!t2 || op[1] > t2[0] && op[1] < t2[3])) {
              _6.label = op[1];
              break;
            }
            if (op[0] === 6 && _6.label < t2[1]) {
              _6.label = t2[1];
              t2 = op;
              break;
            }
            if (t2 && _6.label < t2[2]) {
              _6.label = t2[2];
              _6.ops.push(op);
              break;
            }
            if (t2[2])
              _6.ops.pop();
            _6.trys.pop();
            continue;
        }
        op = body.call(thisArg, _6);
      } catch (e10) {
        op = [6, e10];
        y5 = 0;
      } finally {
        f12 = t2 = 0;
      }
    if (op[0] & 5)
      throw op[1];
    return { value: op[0] ? op[1] : void 0, done: true };
  }
}
function __values(o7) {
  var s11 = typeof Symbol === "function" && Symbol.iterator, m12 = s11 && o7[s11], i6 = 0;
  if (m12)
    return m12.call(o7);
  if (o7 && typeof o7.length === "number")
    return {
      next: function() {
        if (o7 && i6 >= o7.length)
          o7 = void 0;
        return { value: o7 && o7[i6++], done: !o7 };
      }
    };
  throw new TypeError(s11 ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function __read(o7, n6) {
  var m12 = typeof Symbol === "function" && o7[Symbol.iterator];
  if (!m12)
    return o7;
  var i6 = m12.call(o7), r10, ar = [], e10;
  try {
    while ((n6 === void 0 || n6-- > 0) && !(r10 = i6.next()).done)
      ar.push(r10.value);
  } catch (error) {
    e10 = { error };
  } finally {
    try {
      if (r10 && !r10.done && (m12 = i6["return"]))
        m12.call(i6);
    } finally {
      if (e10)
        throw e10.error;
    }
  }
  return ar;
}
function __spreadArray(to, from, pack) {
  if (pack || arguments.length === 2)
    for (var i6 = 0, l12 = from.length, ar; i6 < l12; i6++) {
      if (ar || !(i6 in from)) {
        if (!ar)
          ar = Array.prototype.slice.call(from, 0, i6);
        ar[i6] = from[i6];
      }
    }
  return to.concat(ar || Array.prototype.slice.call(from));
}
function __makeTemplateObject(cooked, raw) {
  if (Object.defineProperty) {
    Object.defineProperty(cooked, "raw", { value: raw });
  } else {
    cooked.raw = raw;
  }
  return cooked;
}

// node_modules/@liff/logger/lib/index.es.js
var n;
!function(o7) {
  o7[o7.DEBUG = 1] = "DEBUG", o7[o7.INFO = 2] = "INFO", o7[o7.WARN = 3] = "WARN", o7[o7.ERROR = 4] = "ERROR";
}(n || (n = {}));
var r = function() {
  function r10(o7) {
    void 0 === o7 && (o7 = n.INFO), this.logLevel = o7, this._debug = console.debug, this._info = console.info, this._warn = console.warn, this._error = console.error;
  }
  return r10.prototype.debug = function() {
    for (var r11 = [], i6 = 0; i6 < arguments.length; i6++)
      r11[i6] = arguments[i6];
    this.logLevel <= n.DEBUG && (r11.unshift("[DEBUG]"), this._debug.apply(this, __spreadArray([], __read(r11), false)));
  }, r10.prototype.info = function() {
    for (var r11 = [], i6 = 0; i6 < arguments.length; i6++)
      r11[i6] = arguments[i6];
    this.logLevel <= n.INFO && (r11.unshift("[INFO]"), this._info.apply(this, __spreadArray([], __read(r11), false)));
  }, r10.prototype.warn = function() {
    for (var r11 = [], i6 = 0; i6 < arguments.length; i6++)
      r11[i6] = arguments[i6];
    this.logLevel <= n.WARN && (r11.unshift("[WARN]"), this._warn.apply(this, __spreadArray([], __read(r11), false)));
  }, r10.prototype.error = function() {
    for (var r11 = [], i6 = 0; i6 < arguments.length; i6++)
      r11[i6] = arguments[i6];
    this.logLevel <= n.ERROR && (r11.unshift("[ERROR]"), this._error.apply(this, __spreadArray([], __read(r11), false)));
  }, r10;
}();
var i = new r(Number("3"));

// node_modules/@liff/use/lib/index.es.js
var i2 = function(t2, e10) {
  this._driver = t2, this.liff = e10, this.hooks = this._driver.hooks, this.internalHooks = this._driver.internalHooks;
};
var r2 = function(t2, e10) {
  this._driver = t2, this.liff = e10, this.hooks = this._driver.hooks;
};
var s = function() {
  function t2(t3, e10) {
    this.pluginCtx = new r2(t3, e10), this.moduleCtx = new i2(t3, e10);
  }
  return Object.defineProperty(t2.prototype, "pluginContext", { get: function() {
    return this.pluginCtx;
  }, enumerable: false, configurable: true }), Object.defineProperty(t2.prototype, "moduleContext", { get: function() {
    return this.moduleCtx;
  }, enumerable: false, configurable: true }), t2;
}();
var u = function() {
  function n6() {
    this.modules = /* @__PURE__ */ new Map(), this.hooks = {}, this.internalHooks = {};
  }
  return n6.prototype.addModule = function(n7, o7) {
    this.modules.set(n7, o7), o7.hooks && (this.hooks[n7] = Object.entries(o7.hooks).reduce(function(n8, o8) {
      var i6, r10 = __read(o8, 2), s11 = r10[0], u12 = r10[1];
      return __assign(__assign({}, n8), ((i6 = {})[s11] = u12.on.bind(u12), i6));
    }, {})), "internalHooks" in o7 && o7.internalHooks && (this.internalHooks[n7] = Object.entries(o7.internalHooks).reduce(function(n8, o8) {
      var i6, r10 = __read(o8, 2), s11 = r10[0], u12 = r10[1];
      return __assign(__assign({}, n8), ((i6 = {})[s11] = u12.on.bind(u12), i6));
    }, {}));
  }, n6.prototype.hasModule = function(t2) {
    return this.modules.has(t2);
  }, n6;
}();
var a = function() {
};
var l = function(t2) {
  return t2 instanceof a;
};
var c = function(t2) {
  function e10(e11, n6, o7) {
    var i6 = t2.call(this) || this;
    return i6.driver = e11, i6.contextHolder = n6, i6.option = o7, i6;
  }
  return __extends(e10, t2), e10.prototype.install = function() {
    return this.factory(this.driver, this.contextHolder);
  }, Object.defineProperty(e10.prototype, "name", { get: function() {
    return "use";
  }, enumerable: false, configurable: true }), Object.defineProperty(e10.prototype, "defaultOption", { get: function() {
    return { namespacePrefix: "$" };
  }, enumerable: false, configurable: true }), e10.prototype.factory = function(t3, e11) {
    var n6 = Object.assign({}, this.defaultOption, this.option).namespacePrefix;
    return function(i6, r10) {
      if (!i6 || "function" != typeof i6.install || "string" != typeof i6.name)
        return i.warn("To install the plugin, you need to define the `name` property and the `install` method."), this;
      var s11 = l(i6) ? i6.name : "".concat(n6).concat(i6.name);
      if (t3.hasModule(s11))
        return this;
      var u12 = l(i6) ? i6.install.call(i6, e11.moduleContext, r10) : i6.install.call(i6, e11.pluginContext, r10);
      return this["".concat(s11)] ? (i.warn("There is a duplicate plugin name. `".concat(s11, "` plugin namespace will be override.")), this["".concat(s11)] = u12) : void 0 !== u12 && (this["".concat(s11)] = u12), t3.addModule(s11, i6), this;
    };
  }, e10;
}(a);

// node_modules/@liff/ready/lib/index.es.js
var e;
var n2 = new Promise(function(n6) {
  e = n6;
});

// node_modules/@liff/consts/lib/index.es.js
var e2 = "UNKNOWN";
var t = "UNAUTHORIZED";
var I = "INVALID_ARGUMENT";
var i3 = "INIT_FAILED";
var E = "FORBIDDEN";
var T = "INVALID_CONFIG";
var _ = "INVALID_ID_TOKEN";
var n3 = "CREATE_SUBWINDOW_FAILED";
var N = "EXCEPTION_IN_SUBWINDOW";
var o = "liffEvent";
var l2 = "LIFF_STORE";
var s2 = "https://liff.".concat("line.me", "/");
var r3 = { ACCESS_TOKEN: "accessToken", ID_TOKEN: "IDToken", DECODED_ID_TOKEN: "decodedIDToken", FEATURE_TOKEN: "featureToken", LOGIN_TMP: "loginTmp", CONFIG: "config", CONTEXT: "context", EXPIRES: "expires", RAW_CONTEXT: "rawContext", CLIENT_ID: "clientId", IS_SUBSEQUENT_LIFF_APP: "isSubsequentLiffApp", MST_CHALLENGE: "mstChallenge", MSIT: "msit", MST: "mst", MST_VERIFIER: "mstVerifier", APP_DATA: "appData" };
var D = "isInClient";
var a2 = ["context_token", "feature_token", "access_token", "id_token", "client_id", "mst_verifier", "mst_challenge", "msit"];
var c2 = 5;
var O = ["liff.ref.source", "liff.ref.medium", "liff.ref.campaign", "liff.ref.term", "liff.ref.content"];
var A = "liff://subwindow";
var C = { INIT: "init", SUBMIT: "submit", CANCEL: "cancel", CLOSE: "close", ERROR: "error" };
var m = 100;
var S = 100;
var L = "liff.subwindow";
var p = "healthCheck";
var F = ["profile", "chat_message.write", "openid", "email"];

// node_modules/@liff/util/lib/index.es.js
function c3(n6) {
  return window.atob(n6.replace(/-/g, "+").replace(/_/g, "/"));
}
var u2 = { decode: c3, encode: function(n6) {
  return window.btoa(n6).replace(/\+/g, "-").replace(/\//g, "_").replace(/=+$/, "");
}, decodeUnicode: function(n6) {
  var r10 = c3(n6).split("").map(function(n7) {
    return "%" + ("00" + n7.charCodeAt(0).toString(16)).slice(-2);
  }).join("");
  return decodeURIComponent(r10);
} };
function f(n6, r10) {
  if (n6 === r10)
    return 0;
  for (var t2 = n6.split("."), e10 = r10.split("."), o7 = Math.max(t2.length, e10.length), i6 = 0; i6 < o7; i6++) {
    t2[i6] || (t2[i6] = "0"), e10[i6] || (e10[i6] = "0");
    var a10 = parseInt(t2[i6]) - parseInt(e10[i6]);
    if (0 !== a10)
      return a10 > 0 ? 1 : -1;
  }
  return 0;
}
function l3(r10) {
  var t2 = r10.replace("#", "").match(/.{2}/g) || [];
  if (4 !== t2.length)
    return i.warn("convertArgbToRgba: Received invalid ARGB color"), "";
  var e10 = function(n6) {
    var r11 = p2(n6);
    return Math.round(r11 / 255 * 100) / 100;
  }(t2[0]), o7 = p2(t2[1]), i6 = p2(t2[2]), a10 = p2(t2[3]);
  return "rgba(".concat(o7, ", ").concat(i6, ", ").concat(a10, ", ").concat(e10, ")");
}
function p2(n6) {
  return parseInt(n6, 16);
}
function d(r10) {
  var t2 = r10.replace("#", "").match(/.{2}/g) || [];
  if (3 !== t2.length)
    return i.warn("convertArgbToRgba: Received invalid hex color"), "";
  var e10 = p2(t2[0]), o7 = p2(t2[1]), i6 = p2(t2[2]);
  return "".concat(e10, ", ").concat(o7, ", ").concat(i6);
}
function s3(n6) {
  for (var r10 = n6.length, t2 = new ArrayBuffer(r10), e10 = new Uint8Array(t2), o7 = 0; o7 < r10; o7++)
    e10[o7] = n6.charCodeAt(o7);
  return t2;
}
var v = { get: function(n6) {
  var r10 = new RegExp("(?:(?:^|.*;\\s*)".concat(n6, "\\s*\\=\\s*([^;]*).*$)|^.*$"));
  return document.cookie.replace(r10, "$1");
}, set: function(r10, t2, e10) {
  var o7 = r10 + "=" + t2;
  if (e10)
    for (var i6 in e10) {
      var a10 = e10[i6] ? "=".concat(e10[i6]) : "";
      o7 += "; ".concat(i6).concat(a10);
    }
  i.debug("set cookie", o7), document.cookie = o7;
}, remove: function(n6, r10) {
  var t2 = "".concat(n6, "=; expires=Thu, 01 Jan 1970 00:00:00 GMT");
  if (r10)
    for (var e10 in r10)
      t2 += "; ".concat(e10, "=").concat(r10[e10]);
  document.cookie = t2;
} };
var g = /* @__PURE__ */ new Set(["400", "401", "403", "404", "429", "500"]);
var h = function(n6) {
  function t2(r10, t3) {
    var e10 = n6.call(this, t3) || this;
    return e10.code = r10, e10;
  }
  return __extends(t2, n6), t2;
}(Error);
function m2(n6, r10) {
  return new h(n6, r10 || "");
}
function w(n6) {
  var r10 = n6.match(/([^-]+)-[^-]+/);
  return r10 && r10[1];
}
function y(n6) {
  var r10 = "";
  return n6.replace(/\r|\n/g, "").replace(/([\da-fA-F]{2}) ?/g, "0x$1 ").replace(/ +$/, "").split(" ").forEach(function(n7) {
    r10 += String.fromCharCode(parseInt(n7));
  }), window.btoa(r10);
}
var b = new (function() {
  function n6() {
    this.map = {};
  }
  return n6.prototype.clear = function() {
    this.map = {};
  }, n6.prototype.getItem = function(n7) {
    var r10 = this.map[n7];
    return void 0 === r10 ? null : r10;
  }, n6.prototype.setItem = function(n7, r10) {
    this.map[n7] = r10;
  }, n6.prototype.removeItem = function(n7) {
    delete this.map[n7];
  }, n6.prototype.key = function(n7) {
    var r10 = Object.keys(this.map)[n7];
    return void 0 === r10 ? null : r10;
  }, Object.defineProperty(n6.prototype, "length", { get: function() {
    return Object.keys(this.map).length;
  }, enumerable: false, configurable: true }), n6;
}())();
var A2 = { parse: function(n6) {
  return n6.replace(/^\?/, "").replace(/^#\/?/, "").split(/&+/).filter(function(n7) {
    return n7.length > 0;
  }).reduce(function(n7, r10) {
    var e10 = __read(r10.split("=").map(decodeURIComponent), 2), o7 = e10[0], i6 = e10[1], a10 = n7[o7];
    return Array.isArray(a10) ? a10.push(i6) : Object.prototype.hasOwnProperty.call(n7, o7) ? n7[o7] = [a10, i6] : n7[o7] = i6, n7;
  }, {});
}, stringify: function(n6) {
  return Object.keys(n6).map(function(r10) {
    var t2 = n6[r10], e10 = function(n7) {
      return void 0 !== n7 ? "".concat(encodeURIComponent(r10), "=").concat(encodeURIComponent(n7)) : encodeURIComponent(r10);
    };
    return Array.isArray(t2) ? t2.map(function(n7) {
      return e10(n7);
    }).join("&") : e10(t2);
  }).join("&");
} };
var R = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
function I2() {
  return window.crypto.getRandomValues(new Uint32Array(1))[0] / 4294967296;
}
function U(n6) {
  for (var r10 = "", t2 = 0; t2 < n6; t2++)
    r10 += R[Math.floor(I2() * R.length)];
  return r10;
}
function x(n6) {
  var r10 = new URL(n6), t2 = r10.hash.slice(1).split("&").filter(function(n7) {
    return !a2.some(function(r11) {
      return n7.includes("".concat(r11, "="));
    });
  }).join("&");
  return r10.hash = t2, r10.toString();
}
function j(n6) {
  var r10 = new URL(n6);
  return r10.toString().replace(new RegExp(String.raw(C2 || (C2 = __makeTemplateObject(["^", ""], ["^", ""])), r10.origin)), "");
}
var C2;
var L2 = function(n6) {
  var r10 = j(x(n6));
  window.history.replaceState(history.state, "", r10);
};
function O2(n6, r10) {
  if (!n6)
    throw new Error("addParamsToUrl: invalid URL");
  var e10 = new URL(n6);
  return Object.entries(r10).forEach(function(n7) {
    var r11 = __read(n7, 2), o7 = r11[0], i6 = r11[1];
    e10.searchParams.set(o7, i6);
  }), e10.toString();
}
function k(n6) {
  var r10, t2 = n6.match((r10 = s2.replace(/[.*+?^${}()|[\]\\]/g, "\\$&"), new RegExp("^".concat(r10, "(\\d+-\\w+)"))));
  return t2 && t2[1];
}
function S2(n6) {
  var r10 = n6.match(/^(https?:\/\/.*?)\//);
  return r10 && r10[1] || "";
}
function $(n6) {
  return void 0 === n6 && (n6 = window.navigator.userAgent), /ipad/.test(n6.toLowerCase());
}
function F2(n6) {
  return void 0 === n6 && (n6 = window.navigator.userAgent), /Line\/\d+\.\d+\.\d+/.test(n6);
}
function T2(n6) {
  return void 0 === n6 && (n6 = window.navigator.userAgent), /Line\/\d+\.\d+\.\d+ LIFF/.test(n6);
}
function M(n6) {
  return void 0 === n6 && (n6 = window.navigator.userAgent), /LIFF\/SubWindow/.test(n6);
}
function P(n6) {
  for (var r10, t2, e10 = [], i6 = 1; i6 < arguments.length; i6++)
    e10[i6 - 1] = arguments[i6];
  var a10 = function(r11) {
    Object.keys(r11).filter(function(n7) {
      return null !== r11[n7] && void 0 !== r11[n7];
    }).forEach(function(t3) {
      n6[t3] = r11[t3];
    });
  };
  try {
    for (var c15 = __values(e10), u12 = c15.next(); !u12.done; u12 = c15.next()) {
      var f12 = u12.value;
      a10(f12);
    }
  } catch (l12) {
    r10 = { error: l12 };
  } finally {
    try {
      u12 && !u12.done && (t2 = c15.return) && t2.call(c15);
    } finally {
      if (r10)
        throw r10.error;
    }
  }
  return n6;
}

// node_modules/@liff/is-in-client/lib/index.es.js
var c4 = null;
function u3() {
  return null === c4 && (c4 = T2() || F2() && /[#|&]access_token=/.test(location.hash) || "1" === sessionStorage.getItem("".concat(l2, ":").concat(D)), sessionStorage.setItem("".concat(l2, ":").concat(D), c4 ? "1" : "0")), !!c4;
}
var f2 = function(n6) {
  function o7() {
    return null !== n6 && n6.apply(this, arguments) || this;
  }
  return __extends(o7, n6), Object.defineProperty(o7.prototype, "name", { get: function() {
    return "isInClient";
  }, enumerable: false, configurable: true }), o7.prototype.install = function() {
    return function() {
      return u3();
    };
  }, o7;
}(a);

// node_modules/@liff/store/lib/index.es.js
function c5() {
  var n6;
  return null !== (n6 = window.__liffConfig) && void 0 !== n6 ? n6 : {};
}
function l4(n6) {
  window.__liffConfig = n6;
}
function a3(n6, t2) {
  if (!t2)
    throw m2(T, "liffId is necessary for liff.init()");
  var o7 = (u3() ? sessionStorage : localStorage).getItem("".concat(l2, ":").concat(t2, ":").concat(n6));
  try {
    return null === o7 ? null : JSON.parse(o7);
  } catch (f12) {
    return null;
  }
}
function p3(n6) {
  return a3(n6, c5().liffId);
}
function s4(n6, t2) {
  var o7 = c5().liffId;
  if (!o7)
    throw m2(T, "liffId is necessary for liff.init()");
  (u3() ? sessionStorage : localStorage).setItem("".concat(l2, ":").concat(o7, ":").concat(n6), JSON.stringify(t2));
}
function E2() {
  return p3(r3.CONTEXT);
}
function I3(n6) {
  s4(r3.CONTEXT, n6);
}
var T3 = function(t2) {
  function r10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(r10, t2), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "getContext";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return function() {
      return E2();
    };
  }, r10;
}(a);
function y2() {
  return ((E2() || {}).d || {}).aId;
}
var g2 = function(t2) {
  function r10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(r10, t2), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "getAId";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return function() {
      return y2();
    };
  }, r10;
}(a);
function _2() {
  return ((E2() || {}).d || {}).autoplay || false;
}
var m3 = function(t2) {
  function r10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(r10, t2), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "getIsVideoAutoPlay";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return function() {
      return _2();
    };
  }, r10;
}(a);
function S3() {
  return (E2() || {}).profilePlus;
}
var d2 = function(t2) {
  function r10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(r10, t2), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "getProfilePlus";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return function() {
      return S3();
    };
  }, r10;
}(a);
function O3() {
  return Boolean(p3(r3.IS_SUBSEQUENT_LIFF_APP));
}
function P2(n6) {
  s4(r3.IS_SUBSEQUENT_LIFF_APP, n6);
}
function b2() {
  return p3(r3.APP_DATA);
}
function N2(n6) {
  s4(r3.APP_DATA, n6);
}
function h2() {
  return p3(r3.MST_VERIFIER);
}
function A3(n6) {
  s4(r3.MST_VERIFIER, n6);
}
function v2() {
  return p3(r3.MSIT);
}
function C3(n6) {
  s4(r3.MSIT, n6);
}
function D2() {
  return p3(r3.MST);
}
function L3(n6) {
  s4(r3.MST, n6);
}
function M2() {
  return p3(r3.MST_CHALLENGE);
}
function R2(n6) {
  s4(r3.MST_CHALLENGE, n6);
}
function j2() {
  return p3(r3.CLIENT_ID);
}
function F3(n6) {
  s4(r3.CLIENT_ID, n6);
}
function K() {
  return p3(r3.RAW_CONTEXT);
}
function w2() {
  return p3(r3.FEATURE_TOKEN);
}
function U2(n6) {
  s4(r3.FEATURE_TOKEN, n6);
}
function X() {
  return p3(r3.ID_TOKEN);
}
function G(n6) {
  s4(r3.ID_TOKEN, n6);
}
var k2 = function(t2) {
  function r10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(r10, t2), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "getIDToken";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return function() {
      return X();
    };
  }, r10;
}(a);
function x2() {
  return p3(r3.ACCESS_TOKEN);
}
function B(n6) {
  s4(r3.ACCESS_TOKEN, n6);
}
var V = function(t2) {
  function r10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(r10, t2), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "getAccessToken";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return function() {
      return x2();
    };
  }, r10;
}(a);
function H(n6) {
  var t2 = c5().liffId;
  if (!t2)
    throw m2(T, "liffId is necessary for liff.init()");
  (u3() ? sessionStorage : localStorage).removeItem("".concat(l2, ":").concat(t2, ":").concat(n6));
}
function J() {
  return p3(r3.LOGIN_TMP);
}
function Q(n6) {
  s4(r3.LOGIN_TMP, n6);
}
function W() {
  H(r3.LOGIN_TMP);
}
function q(n6) {
  var t2 = c5();
  v.set("".concat(l2, ":").concat(r3.EXPIRES, ":").concat(t2.liffId), n6.getTime(), { expires: n6.toUTCString(), path: "/", secure: null });
}
function z() {
  var n6 = c5();
  return v.get("".concat(l2, ":").concat(r3.EXPIRES, ":").concat(n6.liffId));
}
function Y() {
  var n6 = c5();
  v.remove("".concat(l2, ":").concat(r3.EXPIRES, ":").concat(n6.liffId), { path: "/" });
}
function Z() {
  return p3(r3.DECODED_ID_TOKEN);
}
function $2(n6) {
  s4(r3.DECODED_ID_TOKEN, n6);
}
var nn = function(t2) {
  function r10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(r10, t2), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "getDecodedIDToken";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return function() {
      return Z();
    };
  }, r10;
}(a);
function tn() {
  Object.keys(r3).forEach(function(n6) {
    H(r3[n6]);
  }), Y();
}

// node_modules/@liff/is-logged-in/lib/index.es.js
function e3() {
  return !!x2();
}
var o2 = function(r10) {
  function n6() {
    return null !== r10 && r10.apply(this, arguments) || this;
  }
  return __extends(n6, r10), Object.defineProperty(n6.prototype, "name", { get: function() {
    return "isLoggedIn";
  }, enumerable: false, configurable: true }), n6.prototype.install = function() {
    return function() {
      return e3();
    };
  }, n6;
}(a);

// node_modules/@liff/get-version/lib/index.es.js
function r4() {
  return "2.22.0";
}
var e4 = function(n6) {
  function r10() {
    return null !== n6 && n6.apply(this, arguments) || this;
  }
  return __extends(r10, n6), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "getVersion";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return function() {
      return "2.22.0";
    };
  }, r10;
}(a);

// node_modules/@liff/is-sub-window/lib/index.es.js
var c6 = function() {
  function t2() {
  }
  return t2.prototype.invoke = function() {
    return M();
  }, t2;
}();
var a4 = function() {
  function t2(t3) {
    this.storage = t3;
  }
  return Object.defineProperty(t2, "IN_SUB_WINDOW_KEY", { get: function() {
    return "inSubWindow";
  }, enumerable: false, configurable: true }), t2.prototype.invoke = function() {
    return new URLSearchParams(window.location.search).has(L) && this.setInSubWindow(true), !(!this.getInSubWindow() && !this.getSubWindowIdentifier());
  }, t2.prototype.getInSubWindow = function() {
    var n6 = this.storage.getItem("".concat(l2, ":").concat(this.getLiffId(), ":").concat(t2.IN_SUB_WINDOW_KEY));
    return null !== n6 && JSON.parse(n6);
  }, t2.prototype.getSubWindowIdentifier = function() {
    var t3, n6, i6 = "liff.subwindow.identifier", e10 = new URLSearchParams(window.location.search);
    return e10.get(i6) || (t3 = i6, (n6 = e10.get("liff.state")) ? new URLSearchParams(n6).get(t3) : null) || null;
  }, t2.prototype.setInSubWindow = function(n6) {
    this.storage.setItem("".concat(l2, ":").concat(this.getLiffId(), ":").concat(t2.IN_SUB_WINDOW_KEY), String(n6));
  }, t2.prototype.getLiffId = function() {
    var t3 = c5().liffId;
    if (!t3)
      throw m2(T, "liffId is necessary for liff.init()");
    return t3;
  }, t2;
}();
var l5 = function(n6) {
  function i6() {
    var t2 = n6.call(this) || this;
    return u3() ? t2.impl = new c6() : t2.impl = new a4(window.sessionStorage), t2;
  }
  return __extends(i6, n6), Object.defineProperty(i6.prototype, "name", { get: function() {
    return "isSubWindow";
  }, enumerable: false, configurable: true }), i6.prototype.install = function() {
    return this.impl.invoke.bind(this.impl);
  }, i6;
}(a);
var p4 = new l5();
var d3 = p4.install();

// node_modules/@liff/get-line-version/lib/index.es.js
function r5() {
  var n6 = navigator.userAgent.match(/Line\/\d+(\.\d+)*/i);
  return n6 ? n6[0].slice(5) : null;
}
var e5 = function(t2) {
  function e10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(e10, t2), Object.defineProperty(e10.prototype, "name", { get: function() {
    return "getLineVersion";
  }, enumerable: false, configurable: true }), e10.prototype.install = function() {
    return function() {
      return r5();
    };
  }, e10;
}(a);

// node_modules/@liff/is-api-available/lib/index.es.js
function m4(e10) {
  var i6, n6 = E2();
  return null === (i6 = null == n6 ? void 0 : n6.availability) || void 0 === i6 ? void 0 : i6[e10];
}
function v3(e10, n6) {
  var r10 = m4(e10);
  if (!r10 || !r10.permission)
    return { available: false, error: { code: E, message: "".concat(e10, " is not allowed in this LIFF app") } };
  var o7 = r10.minVer, t2 = r10.unsupportedFromVer;
  if (u3()) {
    var l12 = function(e11, i6) {
      var n7 = r5();
      return !!n7 && !(i6 && f(n7, i6) > 0) && f(n7, e11) >= 0;
    }(o7, t2);
    return l12 ? { available: true } : { available: false, error: { code: E, message: "".concat(e10, " is unavailable in this client version.") } };
  }
  return n6 ? { available: true } : { available: false, error: { code: E, message: "".concat(e10, " is not allowed in external browser") } };
}
var b3 = function() {
  return e3() ? !T2() && F2() ? { available: false, error: { code: E, message: "Subwindow is not supported in this browser" } } : d3() ? { available: false, error: { code: E, message: "this api can be only called in child window" } } : v3("subwindowOpen", true) : { available: false, error: { code: t, message: "Need access_token for api call, Please login first" } };
};
var g3 = ["subwindowOpen", "shareTargetPicker", "multipleLiffTransition", "scanCode", "scanCodeV2", "getAdvertisingId", "addToHomeScreen", "bluetoothLeFunction", "skipChannelVerificationScreen"];
var h3 = { scanCode: function() {
  return v3("scanCode");
}, getAdvertisingId: function() {
  return v3("getAdvertisingId");
}, bluetoothLeFunction: function() {
  return v3("bluetoothLeFunction");
}, shareTargetPicker: function() {
  return d3() ? { available: false, error: { code: E, message: "this api can be only called in child window" } } : e3() ? v3("shareTargetPicker", true) : { available: false, error: { code: t, message: "Need access_token for api call, Please login first" } };
}, multipleLiffTransition: function() {
  var e10 = m4("multipleLiffTransition");
  return e10 && e10.permission ? u3() ? { available: true } : { available: false, error: { code: E, message: "multipleLiffTransition is available only in the LINE App browser" } } : { available: false, error: { code: E, message: "multipleLiffTransition is not allowed in this LIFF app" } };
}, subwindowOpen: b3, scanCodeV2: function() {
  if (!e3())
    return { available: false, error: { code: t, message: "Need access_token for api call, Please login first" } };
  var e10 = b3();
  return e10.available ? v3("scanCodeV2", true) : e10;
}, addToHomeScreen: function() {
  return d3() ? { available: false, error: { code: E, message: "this api can be only called in child window" } } : v3("addToHomeScreen");
}, skipChannelVerificationScreen: function() {
  var e10 = E2();
  return e10 ? "square_chat" === e10.type ? { available: false, error: { code: E, message: "skipChannelVerificationScreen is not allowed in OpenChat" } } : v3("skipChannelVerificationScreen") : { available: false, error: { code: E, message: "Context is not found" } };
} };
var w3 = function(e10) {
  return function() {
    var i6 = e10();
    if (!i6.available)
      throw m2(i6.error.code, i6.error.message);
  };
};
var C4 = { scanCode: w3(h3.scanCode), getAdvertisingId: w3(h3.getAdvertisingId), bluetoothLeFunction: w3(h3.bluetoothLeFunction), shareTargetPicker: w3(h3.shareTargetPicker), multipleLiffTransition: w3(h3.multipleLiffTransition), subwindowOpen: w3(h3.subwindowOpen), scanCodeV2: w3(h3.scanCodeV2), addToHomeScreen: w3(h3.addToHomeScreen), skipChannelVerificationScreen: w3(h3.skipChannelVerificationScreen) };
function T4(e10) {
  if (!function(e11) {
    return g3.some(function(i7) {
      return i7 === e11;
    });
  }(e10))
    throw m2(I, "Unexpected API name.");
  var i6 = h3[e10];
  return !i6 || i6().available;
}
var k3 = function(i6) {
  function n6() {
    var e10 = null !== i6 && i6.apply(this, arguments) || this;
    return e10.hooks = {}, e10;
  }
  return __extends(n6, i6), Object.defineProperty(n6.prototype, "name", { get: function() {
    return "isApiAvailable";
  }, enumerable: false, configurable: true }), n6.prototype.install = function() {
    return function(e10) {
      return T4(e10);
    };
  }, n6;
}(a);

// node_modules/@liff/check-availability/lib/index.es.js
var e6 = function() {
  function t2() {
  }
  return t2.prototype.invoke = function(t3) {
    var i6 = C4[t3];
    return !!i6 && (i6(), true);
  }, t2;
}();
var r6 = function() {
  function t2(t3) {
    this.liff = t3;
  }
  return t2.prototype.invoke = function(t3) {
    return this.liff.checkFeature(t3);
  }, t2;
}();
var o3 = function() {
  function n6(o7) {
    f(r4(), n6.SDK_VERSION_SUPPORTING_NEW) >= 0 ? this.impl = new e6() : this.impl = new r6(o7);
  }
  return Object.defineProperty(n6, "SDK_VERSION_SUPPORTING_NEW", { get: function() {
    return "2.11.0";
  }, enumerable: false, configurable: true }), n6.prototype.invoke = function(t2) {
    return this.impl.invoke(t2);
  }, n6;
}();

// node_modules/@liff/get-os/lib/index.es.js
var r7;
function e7() {
  if (!r7) {
    var t2 = window.navigator.userAgent.toLowerCase();
    r7 = /iphone|ipad|ipod/.test(t2) ? "ios" : /android/.test(t2) ? "android" : "web";
  }
  return r7;
}
var i4 = function(n6) {
  function r10() {
    return n6.call(this) || this;
  }
  return __extends(r10, n6), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "getOS";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return function() {
      return e7();
    };
  }, r10;
}(a);

// node_modules/@liff/extensions/lib/es/index.js
var c7 = function(t2, n6) {
  return c7 = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(t3, n7) {
    t3.__proto__ = n7;
  } || function(t3, n7) {
    for (var e10 in n7)
      Object.prototype.hasOwnProperty.call(n7, e10) && (t3[e10] = n7[e10]);
  }, c7(t2, n6);
};
function u4(t2, n6, e10, o7) {
  return new (e10 || (e10 = Promise))(function(r10, i6) {
    function c15(t3) {
      try {
        l12(o7.next(t3));
      } catch (n7) {
        i6(n7);
      }
    }
    function u12(t3) {
      try {
        l12(o7.throw(t3));
      } catch (n7) {
        i6(n7);
      }
    }
    function l12(t3) {
      var n7;
      t3.done ? r10(t3.value) : (n7 = t3.value, n7 instanceof e10 ? n7 : new e10(function(t4) {
        t4(n7);
      })).then(c15, u12);
    }
    l12((o7 = o7.apply(t2, n6 || [])).next());
  });
}
function l6(t2, n6) {
  var e10, o7, r10, i6, c15 = { label: 0, sent: function() {
    if (1 & r10[0])
      throw r10[1];
    return r10[1];
  }, trys: [], ops: [] };
  return i6 = { next: u12(0), throw: u12(1), return: u12(2) }, "function" == typeof Symbol && (i6[Symbol.iterator] = function() {
    return this;
  }), i6;
  function u12(i7) {
    return function(u13) {
      return function(i8) {
        if (e10)
          throw new TypeError("Generator is already executing.");
        for (; c15; )
          try {
            if (e10 = 1, o7 && (r10 = 2 & i8[0] ? o7.return : i8[0] ? o7.throw || ((r10 = o7.return) && r10.call(o7), 0) : o7.next) && !(r10 = r10.call(o7, i8[1])).done)
              return r10;
            switch (o7 = 0, r10 && (i8 = [2 & i8[0], r10.value]), i8[0]) {
              case 0:
              case 1:
                r10 = i8;
                break;
              case 4:
                return c15.label++, { value: i8[1], done: false };
              case 5:
                c15.label++, o7 = i8[1], i8 = [0];
                continue;
              case 7:
                i8 = c15.ops.pop(), c15.trys.pop();
                continue;
              default:
                if (!(r10 = c15.trys, (r10 = r10.length > 0 && r10[r10.length - 1]) || 6 !== i8[0] && 2 !== i8[0])) {
                  c15 = 0;
                  continue;
                }
                if (3 === i8[0] && (!r10 || i8[1] > r10[0] && i8[1] < r10[3])) {
                  c15.label = i8[1];
                  break;
                }
                if (6 === i8[0] && c15.label < r10[1]) {
                  c15.label = r10[1], r10 = i8;
                  break;
                }
                if (r10 && c15.label < r10[2]) {
                  c15.label = r10[2], c15.ops.push(i8);
                  break;
                }
                r10[2] && c15.ops.pop(), c15.trys.pop();
                continue;
            }
            i8 = n6.call(t2, c15);
          } catch (u14) {
            i8 = [6, u14], o7 = 0;
          } finally {
            e10 = r10 = 0;
          }
        if (5 & i8[0])
          throw i8[1];
        return { value: i8[0] ? i8[1] : void 0, done: true };
      }([i7, u13]);
    };
  }
}
var s5 = false;
var a5 = function() {
  return s5;
};
var f3 = function(t2) {
  function n6() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return function(t3, n7) {
    if ("function" != typeof n7 && null !== n7)
      throw new TypeError("Class extends value " + String(n7) + " is not a constructor or null");
    function e10() {
      this.constructor = t3;
    }
    c7(t3, n7), t3.prototype = null === n7 ? Object.create(n7) : (e10.prototype = n7.prototype, new e10());
  }(n6, t2), Object.defineProperty(n6.prototype, "name", { get: function() {
    return "_legacyExtensionsEnabled";
  }, enumerable: false, configurable: true }), n6.prototype.install = function() {
    s5 = true;
  }, n6;
}(a);
function p5() {
  var t2;
  return "ios" === e7() ? (t2 = r5()) && f(t2, "9.19.0") < 0 ? "https://static.line-scdn.net/liff/edge/2/ios-918-extensions_2_22_0.js" : "https://static.line-scdn.net/liff/edge/2/ios-extensions_2_22_0.js" : "https://static.line-scdn.net/liff/edge/2/non-ios-extensions_2_22_0.js";
}
function y3() {
  return a5() ? function() {
    return u4(this, void 0, void 0, function() {
      return l6(this, function(e10) {
        switch (e10.label) {
          case 0:
            return [3, 2];
          case 1:
            return [2, e10.sent().default];
          case 2:
            return [2, new Promise(function(e11, o7) {
              var r10 = document.createElement("script"), i6 = p5();
              r10.onload = function() {
                var r11 = window.liffClientExtension;
                r11 ? e11(r11) : o7(m2(i3, "Unable to load client features. (Extension is empty)"));
              }, r10.onerror = function() {
                o7(m2(i3, "Unable to load client features."));
              }, r10.src = i6, r10.type = "text/javascript", document.body.appendChild(r10);
            })];
        }
      });
    });
  }() : Promise.resolve(void 0);
}

// node_modules/@liff/logout/lib/index.es.js
function o4() {
  tn();
}
var e8 = function(r10) {
  function n6() {
    return null !== r10 && r10.apply(this, arguments) || this;
  }
  return __extends(n6, r10), Object.defineProperty(n6.prototype, "name", { get: function() {
    return "logout";
  }, enumerable: false, configurable: true }), n6.prototype.install = function() {
    return function() {
      return o4();
    };
  }, n6;
}(a);

// node_modules/@liff/server-api/lib/index.es.js
function c8(a10) {
  return __awaiter(this, void 0, void 0, function() {
    var e10, r10, o7;
    return __generator(this, function(t2) {
      switch (t2.label) {
        case 0:
          if (!a10.ok)
            return [3, 4];
          t2.label = 1;
        case 1:
          return t2.trys.push([1, 3, , 4]), [4, a10.json()];
        case 2:
          return [2, t2.sent()];
        case 3:
          return t2.sent(), [2, a10];
        case 4:
          return e10 = String(a10.status), r10 = g.has(e10) ? e10 : e2, [4, a10.json().catch(function() {
            throw m2(r10, a10.statusText);
          })];
        case 5:
          throw o7 = t2.sent(), m2(o7.error || r10, o7.error_description || o7.message);
      }
    });
  });
}
function u5(e10) {
  var t2 = function(e11) {
    if (e11)
      return e11;
    var t3 = x2();
    if (!t3)
      throw m2(t, "Need access_token for api call, Please login first");
    return { "Content-Type": "application/json", Accept: "application/json", Authorization: "Bearer ".concat(t3) };
  }(e10 && e10.headers);
  return __assign(__assign({}, e10), { headers: t2 });
}
function f4(e10, t2) {
  var a10;
  try {
    a10 = u5(t2);
  } catch (n6) {
    return Promise.reject(n6);
  }
  return fetch(e10, a10).then(c8);
}
function p6(e10, t2) {
  var a10;
  try {
    a10 = u5(t2);
  } catch (n6) {
    return Promise.reject(n6);
  }
  return fetch(e10, a10);
}
function h4(e10) {
  var t2 = e10.subdomain, a10 = void 0 === t2 ? "api" : t2, n6 = e10.pathname;
  return "https://".concat(a10, ".").concat("line.me", "/").concat(n6);
}
var m5 = { token: h4({ pathname: "oauth2/v2.1/token" }), certs: h4({ pathname: "oauth2/v2.1/certs" }), "openid-configuration": h4({ subdomain: "access", pathname: ".well-known/openid-configuration" }), authorize: h4({ subdomain: "access", pathname: "liff/v1/authorize" }), profile: h4({ pathname: "v2/profile" }), message: h4({ pathname: "message/v3/share" }), friendship: h4({ pathname: "friendship/v1/status" }), shareTargetPicker: h4({ subdomain: "access", pathname: "oauth2/v2.1/liff/shareTargetPicker" }), shareTargetPickerOtt: h4({ pathname: "liff/v2/apps" }), shareTargetPickerResult: h4({ subdomain: "access", pathname: "oauth2/v2.1/liff/shareTargetPicker/result" }), apps: h4({ pathname: "liff/v2/apps" }), subWindowGetMSIT: h4({ pathname: "liff/v2/sub/msit" }), subWindowGetMSTByMSIT: h4({ pathname: "liff/v2/sub/mst" }), subWindowSubscribe: h4({ subdomain: "liff", pathname: "liff/v2/sub/waitResult" }), subWindowPost: h4({ pathname: "liff/v2/sub/result" }), subWindowGetAppData: h4({ pathname: "liff/v2/sub/appData" }), subWindowGetOrigin: function(e10) {
  return h4({ pathname: "liff/v2/sub/".concat(e10, "/origin") });
}, accessTokenVerify: h4({ pathname: "oauth2/v2.1/verify" }), unauthorizedPermissions: h4({ subdomain: "liff", pathname: "liff/v2/incrementalAgreement/unauthorizedPermissions" }), permanentLink: h4({ subdomain: "liff", pathname: "liff/v2/permanentLink" }) };
function l7(e10) {
  return m5[e10];
}
function v4(e10) {
  return f4("".concat(l7("accessTokenVerify"), "?access_token=").concat(encodeURIComponent(e10)), { headers: { "Content-Type": "application/json", Accept: "application/json" } });
}

// node_modules/@liff/message-bus/lib/index.es.js
var o5 = "liff.subwindow.identifier";
var c9 = "liff.subwindow.cryptokey";
var d4 = __assign(__assign({}, C), { GET_DATA: "getData", SET_DATA: "setData", NOT_FOUND: "notFound", TEARDOWN: "teardown" });
var u6 = { BROADCAST: "broadcast", COMMAND: "command" };
var f5 = { MAIN: "main", SUB: "sub" };
var v5 = function(e10) {
  return __awaiter(void 0, void 0, void 0, function() {
    var t2;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return n6.trys.push([0, 2, , 3]), [4, window.crypto.subtle.importKey("jwk", { kty: "oct", k: e10, alg: "A128GCM", ext: true }, { name: "AES-GCM" }, false, ["encrypt", "decrypt"])];
        case 1:
          return [2, n6.sent()];
        case 2:
          throw t2 = n6.sent(), m2(e2, t2);
        case 3:
          return [2];
      }
    });
  });
};
var p7 = function(e10, r10, s11) {
  return __awaiter(void 0, void 0, void 0, function() {
    var t2, o7, c15, d7;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return n6.trys.push([0, 3, , 4]), t2 = new TextEncoder().encode(e10), [4, v5(r10)];
        case 1:
          return o7 = n6.sent(), [4, window.crypto.subtle.encrypt({ name: "AES-GCM", iv: t2 }, o7, new TextEncoder().encode(s11))];
        case 2:
          return c15 = n6.sent(), [2, btoa(new Uint8Array(c15).reduce(function(e11, t3) {
            return e11 + String.fromCharCode(t3);
          }, ""))];
        case 3:
          throw d7 = n6.sent(), m2(e2, d7);
        case 4:
          return [2];
      }
    });
  });
};
var m6 = function(e10, r10, s11) {
  return __awaiter(void 0, void 0, void 0, function() {
    var t2, o7, c15, d7, u12, f12, l12;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return n6.trys.push([0, 3, , 4]), t2 = new TextEncoder().encode(e10), [4, v5(r10)];
        case 1:
          for (o7 = n6.sent(), c15 = atob(s11), d7 = new Uint8Array(c15.length), u12 = 0; u12 < c15.length; u12++)
            d7[u12] = c15.charCodeAt(u12);
          return [4, window.crypto.subtle.decrypt({ name: "AES-GCM", iv: t2 }, o7, d7.buffer)];
        case 2:
          return f12 = n6.sent(), [2, new TextDecoder().decode(new Uint8Array(f12))];
        case 3:
          throw l12 = n6.sent(), m2(e2, l12);
        case 4:
          return [2];
      }
    });
  });
};
var w4 = function(e10, t2) {
  return y4(e10) === y4(t2);
};
var y4 = function(e10) {
  return "".concat(e10.identifier, "-").concat(e10.action, "-").concat(e10.timestamp);
};
var g4 = function(e10) {
  return Object.keys(C).map(function(e11) {
    return C[e11];
  }).includes(e10) ? u6.BROADCAST : u6.COMMAND;
};
function b4() {
  var e10 = document.createElement("form");
  e10.method = "POST", e10.action = "$MESSAGE_HANDLER_URL";
  var t2 = document.createElement("input");
  t2.type = "hidden", t2.name = "identifier", t2.value = "$IDENTIFIER", e10.appendChild(t2), document.body.appendChild(e10), e10.submit();
}
var E3 = function(s11) {
  void 0 === s11 && (s11 = f5.MAIN);
  var o7 = this;
  this.identification = { identifier: "", cryptoKey: "" }, this.messageHandlerInstance = null, this.listeners = /* @__PURE__ */ new Map(), this.sentMessages = [], this.generateIdentification = function() {
    return __awaiter(o7, void 0, void 0, function() {
      var e10, s12, o8, d7, u12;
      return __generator(this, function(l12) {
        switch (l12.label) {
          case 0:
            return e10 = new URLSearchParams(window.location.search), s12 = function(t2) {
              var n6 = e10.get("liff.state");
              return n6 ? new URLSearchParams(n6).get(t2) : null;
            }, o8 = this, u12 = { identifier: this.windowType === f5.MAIN ? U(12) : e10.get("liff.subwindow.identifier") || s12("liff.subwindow.identifier") || "" }, this.windowType !== f5.MAIN ? [3, 2] : [4, __awaiter(void 0, void 0, void 0, function() {
              var e11, t2, r10;
              return __generator(this, function(n6) {
                switch (n6.label) {
                  case 0:
                    return n6.trys.push([0, 3, , 4]), [4, window.crypto.subtle.generateKey({ name: "AES-GCM", length: 128 }, true, ["encrypt", "decrypt"])];
                  case 1:
                    return e11 = n6.sent(), [4, window.crypto.subtle.exportKey("jwk", e11)];
                  case 2:
                    if (!(t2 = n6.sent()) || !t2.k)
                      throw m2(e2, "failed to generate key");
                    return [2, t2.k];
                  case 3:
                    throw r10 = n6.sent(), m2(e2, r10);
                  case 4:
                    return [2];
                }
              });
            })];
          case 1:
            return d7 = l12.sent(), [3, 3];
          case 2:
            d7 = e10.get(c9) || s12(c9) || "", l12.label = 3;
          case 3:
            return o8.identification = (u12.cryptoKey = d7, u12), [2];
        }
      });
    });
  }, this.hasIdentification = function() {
    var e10 = o7.identification, t2 = e10.identifier, n6 = e10.cryptoKey;
    return "string" == typeof t2 && "string" == typeof n6 && t2.length > 0 && n6.length > 0;
  }, this.isReady = function() {
    return o7.hasIdentification() && !!o7.messageHandlerInstance;
  }, this.setup = function() {
    return __awaiter(o7, void 0, void 0, function() {
      var e10, t2, r10, s12, o8, c15 = this;
      return __generator(this, function(n6) {
        switch (n6.label) {
          case 0:
            return this.messageHandlerInstance ? [2] : [4, this.generateIdentification()];
          case 1:
            if (n6.sent(), !(e10 = this.identification.identifier))
              return [2];
            if (t2 = /^[a-zA-Z0-9]+$/gm, !e10.match(t2))
              throw m2(e2, "Invalid identifier");
            return (r10 = document.createElement("iframe")).style.display = "none", r10.src = "about:blank", document.body.appendChild(r10), null === (o8 = null == r10 ? void 0 : r10.contentWindow) || void 0 === o8 || o8.window.eval("(".concat(b4.toString().replace("$MESSAGE_HANDLER_URL", "".concat("https://liff-subwindow.line.me/liff/v2/sub/messageHandler")).replace("$IDENTIFIER", e10.split("'")[0]), ")()")), s12 = "iframe-".concat(e10, "-ready"), [4, new Promise(function(e11) {
              var t3 = function(n7) {
                n7.data[s12] && (c15.messageHandlerInstance = r10, window.addEventListener("message", c15.proxyToListeners), e11(), document.removeEventListener("message", t3));
              };
              window.addEventListener("message", t3);
            })];
          case 2:
            return [2, n6.sent()];
        }
      });
    });
  }, this.teardown = function() {
    return __awaiter(o7, void 0, void 0, function() {
      var e10, t2;
      return __generator(this, function(n6) {
        switch (n6.label) {
          case 0:
            return this.isReady() ? [4, this.send({ eventName: d4.TEARDOWN })] : [3, 2];
          case 1:
            n6.sent(), window.removeEventListener("message", this.proxyToListeners), this.listeners.clear(), null === (t2 = null === (e10 = this.messageHandlerInstance) || void 0 === e10 ? void 0 : e10.parentNode) || void 0 === t2 || t2.removeChild(this.messageHandlerInstance), this.messageHandlerInstance = null, n6.label = 2;
          case 2:
            return [2];
        }
      });
    });
  }, this.listen = function(e10) {
    o7.listeners.set(e10, e10);
  }, this.listenRepliedEvent = function(e10, t2) {
    var n6 = function(i6) {
      i6.replyTarget && w4(i6.replyTarget, e10) && (t2(i6), o7.listeners.delete(n6));
    };
    o7.listeners.set(n6, n6);
  }, this.send = function(e10) {
    return __awaiter(o7, void 0, void 0, function() {
      var t2, r10, s12, a10, o8 = this;
      return __generator(this, function(n6) {
        switch (n6.label) {
          case 0:
            if (!this.isReady())
              throw m2("message bus is not ready to send message");
            return r10 = { action: g4(e10.eventName), identifier: this.identification.identifier || "", timestamp: (/* @__PURE__ */ new Date()).getTime() }, [4, this.getEncryptedContext(e10)];
          case 1:
            return r10.context = n6.sent(), t2 = r10, null === (a10 = null === (s12 = this.messageHandlerInstance) || void 0 === s12 ? void 0 : s12.contentWindow) || void 0 === a10 || a10.postMessage({ messageBusEvent: t2 }, "*"), this.sentMessages.push(y4(t2)), [4, new Promise(function(e11) {
              o8.listenRepliedEvent(t2, function(t3) {
                e11(t3.context);
              });
            })];
          case 2:
            return [2, n6.sent()];
        }
      });
    });
  }, this.reply = function(e10, r10) {
    return __awaiter(o7, void 0, void 0, function() {
      var t2, s12, o8, c15;
      return __generator(this, function(n6) {
        switch (n6.label) {
          case 0:
            if (!this.isReady())
              throw m2("message bus is not ready to send message");
            if (!e10.identifier || !e10.timestamp)
              throw m2(e2, "target message is not valid");
            return s12 = { action: u6.BROADCAST }, [4, this.getEncryptedContext(r10)];
          case 1:
            return s12.context = n6.sent(), s12.identifier = this.identification.identifier || "", s12.timestamp = (/* @__PURE__ */ new Date()).getTime(), s12.replyTarget = { action: e10.action, identifier: e10.identifier, timestamp: e10.timestamp }, t2 = s12, null === (c15 = null === (o8 = this.messageHandlerInstance) || void 0 === o8 ? void 0 : o8.contentWindow) || void 0 === c15 || c15.postMessage({ messageBusEvent: t2 }, "*"), this.sentMessages.push(y4(t2)), [2];
        }
      });
    });
  }, this.setData = function(e10, t2) {
    void 0 === e10 && (e10 = "appData"), o7.send({ eventName: d4.SET_DATA, key: e10, data: t2 });
  }, this.getData = function(e10) {
    return void 0 === e10 && (e10 = "appData"), __awaiter(o7, void 0, void 0, function() {
      return __generator(this, function(t2) {
        switch (t2.label) {
          case 0:
            return [4, this.send({ eventName: d4.GET_DATA, key: e10 })];
          case 1:
            return [2, t2.sent()];
        }
      });
    });
  }, this.proxyToListeners = function(i6) {
    return __awaiter(o7, void 0, void 0, function() {
      var r10, s12 = this;
      return __generator(this, function(a10) {
        return (r10 = i6.data.messageBusEvent) ? (this.sentMessages.includes(y4(r10)) || r10.identifier !== this.identification.identifier || r10.action !== u6.BROADCAST && !r10.replyTarget || this.listeners.forEach(function(i7) {
          return __awaiter(s12, void 0, void 0, function() {
            var t2, s13, a11;
            return __generator(this, function(n6) {
              switch (n6.label) {
                case 0:
                  return t2 = i7, s13 = [__assign({}, r10)], a11 = {}, [4, this.getDecryptedContext(r10.context)];
                case 1:
                  return t2.apply(void 0, [__assign.apply(void 0, s13.concat([(a11.context = n6.sent(), a11)]))]), [2];
              }
            });
          });
        }), [2]) : [2];
      });
    });
  }, this.getEncryptedContext = function(e10) {
    return __awaiter(o7, void 0, void 0, function() {
      var t2, i6, r10, s12, a10, o8, c15;
      return __generator(this, function(n6) {
        switch (n6.label) {
          case 0:
            return t2 = this.identification, i6 = t2.identifier, r10 = t2.cryptoKey, a10 = (s12 = JSON).stringify, c15 = { eventName: e10.eventName, key: e10.key ? e10.key : void 0 }, e10.data ? [4, p7(i6, r10, JSON.stringify(e10.data))] : [3, 2];
          case 1:
            return o8 = n6.sent(), [3, 3];
          case 2:
            o8 = void 0, n6.label = 3;
          case 3:
            return [2, a10.apply(s12, [(c15.data = o8, c15)])];
        }
      });
    });
  }, this.getDecryptedContext = function(i6) {
    return __awaiter(o7, void 0, void 0, function() {
      var t2, r10, s12, a10, o8, c15, d7, u12;
      return __generator(this, function(n6) {
        switch (n6.label) {
          case 0:
            return t2 = this.identification, r10 = t2.identifier, s12 = t2.cryptoKey, (a10 = JSON.parse(i6)).data && "string" == typeof a10.data ? (u12 = (d7 = JSON).parse, [4, m6(r10, s12, a10.data)]) : [3, 2];
          case 1:
            return c15 = u12.apply(d7, [n6.sent()]), [3, 3];
          case 2:
            c15 = void 0, n6.label = 3;
          case 3:
            return o8 = c15, [2, __assign(__assign({}, a10), { data: o8 })];
        }
      });
    });
  }, this.windowType = s11;
};

// node_modules/@liff/native-bridge/lib/index.es.js
function d5(e10) {
  return new CustomEvent(o, { detail: e10 });
}
!function() {
  if ("function" != typeof window.CustomEvent) {
    let t2 = function(t3, e10) {
      var i6 = e10 || {}, o7 = i6.bubbles, n6 = void 0 !== o7 && o7, a10 = i6.cancelable, r10 = void 0 !== a10 && a10, l12 = i6.detail, d7 = void 0 === l12 ? void 0 : l12, f12 = document.createEvent("CustomEvent");
      return f12.initCustomEvent(t3, n6, r10, d7), f12;
    };
    t2.prototype = Event.prototype, window.CustomEvent = t2;
  }
}();
var f6 = {};
var c10 = false;
function s6(e10, i6) {
  c10 || (c10 = true, window.addEventListener(o, function(t2) {
    t2 && t2.detail && t2.detail.type && f6[t2.detail.type] && f6[t2.detail.type].forEach(function(e11) {
      return e11(t2);
    });
  })), f6[e10] ? f6[e10].push(i6) : f6[e10] = [i6];
}
function u7(t2, e10) {
  var i6 = f6[t2];
  if (i6 && Array.isArray(i6)) {
    var o7 = i6.indexOf(e10);
    o7 >= 0 && i6.splice(o7, 1);
  }
}
function v6(t2) {
  var i6 = {};
  try {
    i6 = JSON.parse(t2);
  } catch (r10) {
    throw m2(I, r10.message);
  }
  var a10 = d5(i6);
  i.debug("[client dispatchEvent to js]", { type: a10.type, detail: a10.detail }), window.dispatchEvent(a10);
}
function p8(t2, a10, l12) {
  void 0 === a10 && (a10 = {}), void 0 === l12 && (l12 = "");
  var d7 = w2();
  if (!d7)
    throw m2(E, "Invalid featureToken for client features");
  if (!window._liff || !window._liff.postMessage)
    throw m2(I, "postMessage is not available from client");
  i.debug("[js postMessage to client]", t2, l12, a10), window._liff.postMessage(t2, d7, l12, JSON.stringify(a10));
}
function m7(t2, e10, d7) {
  return void 0 === e10 && (e10 = {}), void 0 === d7 && (d7 = { once: true }), w2() ? (d7 = __assign({ callbackId: U(12), once: true }, d7), new Promise(function(i6, n6) {
    var a10 = function(e11) {
      if (e11 && e11.detail) {
        var r10 = e11.detail.callbackId === d7.callbackId, l12 = "string" != typeof e11.detail.callbackId;
        (r10 || l12) && (d7.once && u7(t2, a10), i.debug("[callback detail]", e11.detail), e11.detail.error ? n6(e11.detail.error) : e11.detail.data ? i6(e11.detail.data) : n6(e11.detail));
      }
      n6();
    };
    s6(t2, a10), p8(t2, e10, d7.callbackId);
  })) : Promise.reject(m2(E, "Invalid featureToken for client features"));
}

// node_modules/@liff/close-window/lib/index.es.js
function r8() {
  var o7 = r5();
  null !== o7 && ("ios" === e7() && f(o7, "9.19") >= 0 || "android" === e7() && f(o7, "11.6.0") >= 0) ? location.href = "liff://close" : window._liff && window._liff.postMessage ? null !== o7 && f(o7, "10.15.0") >= 0 ? "ios" === e7() ? window._liff.postMessage("closeWindow", "") : window._liff.postMessage("closeWindow", "", "", "") : m7("closeWindow") : window.close();
}
var l8 = function(i6) {
  function n6() {
    return null !== i6 && i6.apply(this, arguments) || this;
  }
  return __extends(n6, i6), Object.defineProperty(n6.prototype, "name", { get: function() {
    return "closeWindow";
  }, enumerable: false, configurable: true }), n6.prototype.install = function() {
    return function() {
      return r8();
    };
  }, n6;
}(a);

// node_modules/@liff/sub-window/lib/index.es.js
function k4(e10) {
  var t2 = l7("subWindowGetOrigin");
  return f4(t2(e10));
}
var K2 = {};
function G2(e10, t2) {
  e10 && K2[e10] && K2[e10].forEach(function(e11) {
    e11(t2);
  });
}
var V2;
var F4;
var _3;
var q2;
var z2;
var H2 = function() {
  function e10(e11) {
    this.storage = e11;
  }
  return e10.prototype.getItem = function(e11) {
    return this.storage.getItem("".concat(this.getKeyPrefix(), ":").concat(e11));
  }, e10.prototype.setItem = function(e11, t2) {
    this.storage.setItem("".concat(this.getKeyPrefix(), ":").concat(e11), t2);
  }, e10.prototype.removeItem = function(e11) {
    this.storage.removeItem("".concat(this.getKeyPrefix(), ":").concat(e11));
  }, e10.prototype.clear = function() {
    this.storage.clear();
  }, e10.prototype.getKeyPrefix = function() {
    return "".concat(l2, ":").concat(this.getLiffId());
  }, e10.prototype.getLiffId = function() {
    var e11 = c5().liffId;
    if (!e11)
      throw m2(T, "liffId is necessary for liff.init()");
    return e11;
  }, e10;
}();
var Q2 = new H2(b);
function X2() {
  var e10 = Q2.getItem("subWindowStatusUpdated");
  return null !== e10 && JSON.parse(e10);
}
function Y2(e10) {
  Q2.setItem("subWindowStatusUpdated", String(e10));
}
function Z2(e10) {
  V2 = e10;
}
function $3() {
  return V2;
}
function ee() {
  return _3;
}
function te() {
  return q2;
}
function ne(n6) {
  return void 0 === n6 && (n6 = f5.MAIN), __awaiter(this, void 0, void 0, function() {
    return __generator(this, function(e10) {
      switch (e10.label) {
        case 0:
          return [4, (z2 = new E3(n6)).setup()];
        case 1:
          return e10.sent(), [2, z2];
      }
    });
  });
}
function re() {
  return z2;
}
var ie = new H2(window.sessionStorage);
function oe(e10) {
  ie.setItem("mainWindowOrigin", e10);
}
function se() {
  return ie.getItem("mainWindowOrigin");
}
function ue(n6, r10) {
  return void 0 === r10 && (r10 = {}), __awaiter(this, void 0, void 0, function() {
    var e10, i6, o7, s11, u12, a10, c15, d7;
    return __generator(this, function(t2) {
      switch (t2.label) {
        case 0:
          if (null == (e10 = re()) ? void 0 : e10.isReady())
            return [3, 5];
          if (i6 = JSON.stringify(r10), o7 = c5().liffId, s11 = se(), !window.opener || !s11 || !o7)
            throw m2(N);
          u12 = false, t2.label = 1;
        case 1:
          return t2.trys.push([1, 3, , 4]), [4, k4(o7)];
        case 2:
          return a10 = t2.sent(), u12 = a10.subwindowCommonModule, [3, 4];
        case 3:
          throw c15 = t2.sent(), i.debug(c15), m2(N);
        case 4:
          return d7 = u12 ? s11 : location.origin, [2, new Promise(function(e11) {
            window.addEventListener("message", function t3(r11) {
              (function(e12) {
                if (e12.data && "string" == typeof e12.data.type && [C.SUBMIT, C.CANCEL].includes(e12.data.type))
                  return true;
                return false;
              })(r11) && (window.removeEventListener("message", t3), e11({ status: n6, result: i6 }));
            }), window.opener.postMessage({ status: n6, result: i6 }, d7);
          })];
        case 5:
          return e10.send({ eventName: n6, data: r10 }), [4, new Promise(function(e11) {
            setTimeout(e11, 500);
          })];
        case 6:
          return t2.sent(), [2, { status: n6, result: JSON.stringify(r10) }];
      }
    });
  });
}
function ae(e10) {
  var t2, n6 = te();
  if (e10.origin === n6) {
    var r10 = e10.data;
    if (r10) {
      var i6, o7 = r10.status, s11 = r10.result;
      try {
        i6 = JSON.parse(s11 || "{}");
      } catch (u12) {
        i6 = {};
      }
      switch (o7) {
        case p:
          window.clearInterval(ee()), de();
          break;
        case C.CANCEL:
        case C.SUBMIT:
          Y2(true), window.clearInterval(ee()), window.removeEventListener("message", ae), G2(o7, i6), null === (t2 = $3()) || void 0 === t2 || t2.postMessage({ type: o7 }, te());
          break;
        default:
          i.debug("unexpected message");
      }
    }
  }
}
var ce = function(n6) {
  return __awaiter(void 0, void 0, void 0, function() {
    var e10, r10, i6, o7;
    return __generator(this, function(t2) {
      if (X2())
        return [2];
      switch (e10 = n6.context, r10 = e10.eventName, i6 = e10.data, o7 = re(), r10) {
        case C.INIT:
          le(!i6.hasOpener);
          break;
        case C.CANCEL:
        case C.SUBMIT:
          Y2(true), G2(r10, i6), null == o7 || o7.reply(n6, { eventName: r10 });
          break;
        case C.CLOSE:
          false === X2() && (Y2(true), G2(C.CLOSE, {})), de();
      }
      return [2];
    });
  });
};
function fe() {
  window.clearInterval(F4), window.clearInterval(ee()), window.removeEventListener("message", ae);
}
function le(e10) {
  if (void 0 === e10 && (e10 = false), fe(), Y2(false), e10) {
    var t2 = $3();
    t2 && (t2.close(), Z2(null));
  }
}
function de() {
  return __awaiter(this, void 0, void 0, function() {
    var e10;
    return __generator(this, function(t2) {
      switch (t2.label) {
        case 0:
          return (e10 = re()) ? [4, e10.teardown()] : [3, 2];
        case 1:
          t2.sent(), t2.label = 2;
        case 2:
          return [2];
      }
    });
  });
}
function me(i6) {
  return __awaiter(this, void 0, void 0, function() {
    var e10, o7, s11, u12, a10, c15, f12, g8, b7, y5;
    return __generator(this, function(t2) {
      switch (t2.label) {
        case 0:
          return (e10 = k(i6.url)) ? (le(true), [4, de()]) : [2, Promise.reject(m2(I, "params.url must be liff url"))];
        case 1:
          return t2.sent(), o7 = i6.url, s11 = i6.appData, (u12 = new URL(o7)).searchParams.append(L, "true"), [4, ne()];
        case 2:
          return a10 = t2.sent(), u12.searchParams.append(o5, a10.identification.identifier), u12.searchParams.append(c9, a10.identification.cryptoKey), u12.hostname = function(e11) {
            var t3 = __read(e11.split(".")), i7 = t3[0], o8 = t3.slice(1);
            return __spreadArray(["".concat(i7, "-ext")], __read(o8), false).join(".");
          }(u12.hostname), c15 = u12.toString(), Z2("ios" !== e7() || $() ? window.open("", "liffsubwindow", "width=480, height=640, menubar=no, toolbar=no, scrollbars=yes") : window.open()), [4, k4(e10)];
        case 3:
          if (f12 = t2.sent(), g8 = f12.origin, b7 = f12.subwindowCommonModule, !(y5 = $3()))
            throw m2(n3);
          return b7 ? (function(e11) {
            q2 = e11;
          }(g8), a10.listen(ce), a10.setData("appData", s11), window.addEventListener("message", ae), y5.location.href = c15, S5 = function(e11, t3) {
            var n6 = $3(), r10 = { type: p };
            return t3 && (r10.message = JSON.stringify(t3)), window.setInterval(function() {
              null == n6 || n6.postMessage(r10, e11);
            }, S);
          }(g8, s11), _3 = S5, function(e11) {
            F4 = e11;
          }(window.setInterval(function() {
            var e11 = $3();
            e11 && e11.closed && (fe(), Z2(null), false === X2() && (Y2(true), G2(C.CLOSE, {})));
          }, m)), [2]) : (y5.close(), [2]);
      }
      var S5;
    });
  });
}
var ve = null;
function pe(i6) {
  return __awaiter(this, void 0, void 0, function() {
    var o7, s11, u12, a10, c15, f12, d7, m12, p12, h6, w5, b7, y5, S5, O4 = this;
    return __generator(this, function(P4) {
      switch (P4.label) {
        case 0:
          if (o7 = i6.msit, s11 = i6.mstChallenge, u12 = i6.reconnectCount, a10 = void 0 === u12 ? 0 : u12, c15 = function() {
            return __awaiter(O4, void 0, void 0, function() {
              return __generator(this, function(e10) {
                switch (e10.label) {
                  case 0:
                    return [4, (t2 = 1e3, new Promise(function(e11) {
                      return setTimeout(e11, t2);
                    }))];
                  case 1:
                    return e10.sent(), [4, pe({ msit: o7, mstChallenge: s11, onSuccess: i6.onSuccess, onError: i6.onError, reconnectCount: a10 + 1 })];
                  case 2:
                    return e10.sent(), [2];
                }
                var t2;
              });
            });
          }, f12 = function() {
            for (var e10 = [], t2 = 0; t2 < arguments.length; t2++)
              e10[t2] = arguments[t2];
            ve = null, i6.onSuccess.apply(i6, __spreadArray([], __read(e10), false));
          }, d7 = function() {
            for (var e10 = [], t2 = 0; t2 < arguments.length; t2++)
              e10[t2] = arguments[t2];
            ve = null, i6.onError.apply(i6, __spreadArray([], __read(e10), false));
          }, m12 = Date.now(), null === ve && (ve = m12), p12 = m12 - ve, a10 >= 10 || p12 > 6e5)
            return d7(m2(e2, "Failed to connect")), [2];
          P4.label = 1;
        case 1:
          return P4.trys.push([1, 3, , 5]), [4, p6(l7("subWindowSubscribe"), { method: "POST", body: JSON.stringify({ msit: o7, mstChallenge: s11 }) })];
        case 2:
          return h6 = P4.sent(), [3, 5];
        case 3:
          return P4.sent(), [4, c15()];
        case 4:
          return P4.sent(), [2];
        case 5:
          return h6.status >= 500 ? [4, c15()] : [3, 7];
        case 6:
          return P4.sent(), [3, 17];
        case 7:
          return h6.status >= 400 && 500 > h6.status ? [4, he(h6)] : [3, 9];
        case 8:
          return b7 = P4.sent(), w5 = b7 ? m2(I, b7.errorDetail) : m2(e2, "Some error happened in the server"), d7(w5), [3, 17];
        case 9:
          return 200 !== h6.status ? [3, 16] : [4, he(h6)];
        case 10:
          if (!(b7 = P4.sent()))
            return d7(m2(e2, "Some error happened in the server")), [2];
          switch (y5 = b7.status, S5 = b7.result, y5) {
            case C.ERROR:
              return [3, 11];
            case C.CLOSE:
            case C.CANCEL:
            case C.SUBMIT:
              return [3, 13];
          }
          return [3, 14];
        case 11:
          return [4, c15()];
        case 12:
          return P4.sent(), [3, 15];
        case 13:
          return f12(y5, S5), [3, 15];
        case 14:
          d7(m2(e2, "Some error happened in the server")), P4.label = 15;
        case 15:
          return [3, 17];
        case 16:
          d7(m2(e2, "Some error happened in the server")), P4.label = 17;
        case 17:
          return [2];
      }
    });
  });
}
function he(n6) {
  return __awaiter(this, void 0, void 0, function() {
    return __generator(this, function(e10) {
      switch (e10.label) {
        case 0:
          return e10.trys.push([0, 2, , 3]), [4, n6.json()];
        case 1:
          return [2, e10.sent()];
        case 2:
          return e10.sent(), [2, null];
        case 3:
          return [2];
      }
    });
  });
}
function we(e10) {
  var t2 = {};
  return Object.keys(e10).forEach(function(n6) {
    "closeButtonColor" === n6 ? "white" === e10[n6] ? t2[n6] = "#ffffff" : t2[n6] = "#000000" : t2[n6] = e10[n6];
  }), t2;
}
var ge = { height: "full", closeButtonPosition: "right", closeButtonColor: "black", closeButtonLabel: "" };
function be(e10) {
  var t2 = e10.appData, n6 = e10.native, r10 = c5().liffId, i6 = M2(), o7 = k(e10.url);
  if (!r10)
    return Promise.reject(m2(t, "liffId is invalid"));
  if (!i6)
    return Promise.reject(m2(t, "mst_challenge is invalid"));
  if (!o7)
    return Promise.reject(m2(I, "params.url must be liff url"));
  var s11 = Object.assign({}, ge, n6);
  return function(e11) {
    var t3 = e11.mainLiffId, n7 = e11.subLiffId, r11 = e11.mstChallenge, i7 = e11.appData, o8 = e11.view;
    return t3 && r11 ? f4(l7("subWindowGetMSIT"), { method: "POST", body: JSON.stringify({ mainLiffId: t3, subLiffId: n7, mstChallenge: r11, appData: i7, view: o8 }) }) : Promise.reject(m2(I, "no proper argument"));
  }({ mainLiffId: r10, subLiffId: o7, mstChallenge: i6, appData: t2, view: we(s11) }).then(function(t3) {
    var n7 = t3.msit;
    pe({ msit: n7, mstChallenge: i6, onSuccess: function(e11, t4) {
      G2(e11, t4);
    }, onError: function(e11) {
      G2(C.ERROR, e11);
    } }), function(e11, t4) {
      var n8 = e11.url, r11 = new URLSearchParams();
      r11.set("msit", t4), location.href = "".concat(A, "?url=").concat(encodeURIComponent(n8), "&").concat(r11.toString());
    }(e10, n7);
  });
}
function ye(e10) {
  if (!e10.mst || !e10.status)
    return Promise.reject(m2(I, "no proper argument"));
  var t2 = JSON.stringify(e10);
  return f4(l7("subWindowPost"), { method: "POST", body: t2 });
}
function Se() {
  if (!d3())
    throw m2(t, "this api can be only called in child window");
}
function Ie(e10) {
  var t2 = e10.msit, n6 = e10.mstVerifier;
  return t2 && n6 ? f4(l7("subWindowGetMSTByMSIT"), { method: "POST", body: JSON.stringify({ msit: t2, mstVerifier: n6 }) }) : Promise.reject(m2(I, "no proper argument"));
}
function Oe(e10) {
  var t2 = e10.mst;
  return t2 ? f4(l7("subWindowGetAppData"), { method: "POST", body: JSON.stringify({ mst: t2 }) }) : Promise.reject(m2(I, "no proper argument"));
}
var Pe = { on: function(e10, t2) {
  K2[e10] || (K2[e10] = []), K2[e10].push(t2);
}, off: function(e10, t2) {
  if (K2[e10]) {
    var n6 = K2[e10].indexOf(t2);
    n6 >= 0 && K2[e10].splice(n6, 1);
  }
}, open: function(e10) {
  return C4.subwindowOpen(), u3() ? be(e10) : me(e10);
}, cancel: function(n6) {
  return void 0 === n6 && (n6 = {}), Se(), u3() ? function(n7) {
    return void 0 === n7 && (n7 = {}), __awaiter(this, void 0, void 0, function() {
      var e10, r10;
      return __generator(this, function(t2) {
        switch (t2.label) {
          case 0:
            return (e10 = D2()) ? [4, ye({ mst: e10, status: C.CANCEL, result: n7 })] : [2, Promise.reject(m2(t, "mst is invalid"))];
          case 1:
            return r10 = t2.sent(), Y2(true), [2, r10];
        }
      });
    });
  }(n6) : function(e10) {
    return void 0 === e10 && (e10 = {}), ue(C.CANCEL, e10);
  }(n6);
}, submit: function(n6) {
  return void 0 === n6 && (n6 = {}), Se(), u3() ? function(n7) {
    return void 0 === n7 && (n7 = {}), __awaiter(this, void 0, void 0, function() {
      var e10, r10;
      return __generator(this, function(t2) {
        switch (t2.label) {
          case 0:
            return (e10 = D2()) ? [4, ye({ mst: e10, status: C.SUBMIT, result: n7 })] : [2, Promise.reject(m2(t, "mst is invalid"))];
          case 1:
            return r10 = t2.sent(), Y2(true), [2, r10];
        }
      });
    });
  }(n6) : function(e10) {
    return void 0 === e10 && (e10 = {}), ue(C.SUBMIT, e10);
  }(n6);
}, close: function() {
  return Se(), u3() ? function() {
    return __awaiter(this, void 0, void 0, function() {
      var e10;
      return __generator(this, function(t2) {
        switch (t2.label) {
          case 0:
            return false !== X2() ? [3, 2] : (e10 = D2()) ? [4, ye({ mst: e10, status: C.CLOSE, result: {} })] : [2, Promise.reject(m2(t, "mst is invalid"))];
          case 1:
            t2.sent(), t2.label = 2;
          case 2:
            return r8(), [2];
        }
      });
    });
  }() : function() {
    return __awaiter(this, void 0, void 0, function() {
      var e10;
      return __generator(this, function(t2) {
        return (null == (e10 = re()) ? void 0 : e10.isReady()) ? (e10.send({ eventName: C.CLOSE }), [2, new Promise(function(e11) {
          setTimeout(function() {
            r8(), e11();
          }, S);
        })]) : (r8(), [2, Promise.resolve()]);
      });
    });
  }();
}, getAppData: function() {
  return Se(), function() {
    var e10, t2 = b2();
    try {
      e10 = t2 ? JSON.parse(t2) : {};
    } catch (n6) {
      e10 = {};
    }
    return Promise.resolve(e10);
  }();
} };
var Ce = function(e10) {
  function t2() {
    return null !== e10 && e10.apply(this, arguments) || this;
  }
  return __extends(t2, e10), Object.defineProperty(t2.prototype, "name", { get: function() {
    return "subWindow";
  }, enumerable: false, configurable: true }), t2.prototype.install = function() {
    return Pe;
  }, t2;
}(a);

// node_modules/@liff/login/lib/index.es.js
var import_tiny_sha256 = __toESM(require_tiny_sha256());

// node_modules/@liff/hooks/lib/index.es.js
var s7 = function() {
  var e10 = this;
  this.type = "sync", this.fns = /* @__PURE__ */ new Set(), this.on = function(n6) {
    e10.fns.add(n6);
  }, this.call = function() {
    for (var i6, s11, a10 = [], o7 = 0; o7 < arguments.length; o7++)
      a10[o7] = arguments[o7];
    try {
      for (var l12 = __values(e10.fns), c15 = l12.next(); !c15.done; c15 = l12.next()) {
        var f12 = c15.value;
        f12.apply(void 0, __spreadArray([], __read(a10), false));
      }
    } catch (u12) {
      i6 = { error: u12 };
    } finally {
      try {
        c15 && !c15.done && (s11 = l12.return) && s11.call(l12);
      } finally {
        if (i6)
          throw i6.error;
      }
    }
  };
};
var a6 = function() {
  var s11 = this;
  this.type = "async", this.fns = /* @__PURE__ */ new Set(), this.on = function(n6) {
    s11.fns.add(n6);
  }, this.call = function() {
    for (var a10 = [], o7 = 0; o7 < arguments.length; o7++)
      a10[o7] = arguments[o7];
    return __awaiter(s11, void 0, void 0, function() {
      var e10, s12, o8, l12, c15, f12;
      return __generator(this, function(i6) {
        switch (i6.label) {
          case 0:
            e10 = [];
            try {
              for (s12 = __values(this.fns), o8 = s12.next(); !o8.done; o8 = s12.next())
                l12 = o8.value, e10.push(l12.apply(void 0, __spreadArray([], __read(a10), false)));
            } catch (u12) {
              c15 = { error: u12 };
            } finally {
              try {
                o8 && !o8.done && (f12 = s12.return) && f12.call(s12);
              } finally {
                if (c15)
                  throw c15.error;
              }
            }
            return [4, Promise.all(e10)];
          case 1:
            return i6.sent(), [2];
        }
      });
    });
  };
};

// node_modules/@liff/login/lib/index.es.js
var _4 = function(i6) {
  var m12, g8 = U(43), _6 = y((0, import_tiny_sha256.default)(g8)).replace(/\+/g, "-").replace(/\//g, "_").replace(/=/g, ""), b7 = c5();
  if (!b7 || !b7.liffId)
    throw m2(T, "You need to define `liffId` for liff.login()");
  var v7 = { app_id: b7.liffId, state: U(12), response_type: "code", code_challenge_method: "S256", code_challenge: _6, liff_sdk_version: r4() };
  i6 && i6.redirectUri && (v7.redirect_uri = i6.redirectUri), d3() && !u3() && ((null === (m12 = re()) || void 0 === m12 ? void 0 : m12.isReady()) ? v7.redirect_uri = window.location.href : v7.disable_auto_login = "true"), Q({ codeVerifier: g8 });
  var w5 = l7("authorize") + "?" + A2.stringify(v7);
  i.debug("[Redirect] ".concat(w5)), window.location.href = w5;
};
var b5 = function(o7) {
  function r10() {
    var i6 = null !== o7 && o7.apply(this, arguments) || this;
    return i6.hooks = { before: new s7() }, i6;
  }
  return __extends(r10, o7), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "login";
  }, enumerable: false, configurable: true }), r10.prototype.install = function() {
    return this._login.bind(this);
  }, r10.prototype._login = function(i6) {
    this.hooks.before.call(i6), _4(i6);
  }, r10;
}(a);

// node_modules/@liff/i18n/lib/index.es.js
var a7 = navigator.language;
var c11 = null;
function u9(t2) {
  return __awaiter(this, void 0, void 0, function() {
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return a7 = t2, [4, l9()];
        case 1:
          return n6.sent(), [2];
      }
    });
  });
}
function l9() {
  return __awaiter(this, void 0, void 0, function() {
    var t2, n6;
    return __generator(this, function(e10) {
      switch (e10.label) {
        case 0:
          return [4, f4("".concat("https://liffsdk.line-scdn.net/xlt/manifest.json"), { method: "GET", headers: { Accept: "application/json" } })];
        case 1:
          return t2 = e10.sent(), n6 = "".concat(a7), !t2.languages[n6] && a7.includes("-") && (n6 = a7.split("-")[0]), t2.languages[n6] || (n6 = "en"), [4, f4("".concat("https://liffsdk.line-scdn.net/xlt", "/").concat(t2.languages[n6]), { method: "GET", headers: { Accept: "application/json" } })];
        case 2:
          return c11 = e10.sent(), [2];
      }
    });
  });
}
function f7(t2) {
  if (null === c11)
    throw m2(i3, "please call xlt after liff.init");
  return c11[t2];
}
var p9 = function(i6) {
  function r10() {
    return null !== i6 && i6.apply(this, arguments) || this;
  }
  return __extends(r10, i6), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "i18n";
  }, enumerable: false, configurable: true }), r10.prototype.install = function(t2) {
    return t2.internalHooks.init.beforeFinished(this.beforeInitFinished.bind(this)), { setLang: u9 };
  }, r10.prototype.beforeInitFinished = function() {
    return __awaiter(this, void 0, void 0, function() {
      return __generator(this, function(t2) {
        switch (t2.label) {
          case 0:
            return [4, l9()];
          case 1:
            return t2.sent(), [2];
        }
      });
    });
  }, r10;
}(a);
var h5 = new p9();

// node_modules/@liff/init/lib/index.es.js
var Te = { iconColor: "#111111", statusBarColor: "BLACK", titleTextColor: "#111111", titleSubtextColor: "#B7B7B7", titleButtonColor: "#111111", titleBackgroundColor: "#FFFFFF", progressBarColor: "#06C755", progressBackgroundColor: "#FFFFFF", titleButtonAreaBackgroundColor: "#1FFFFFFF", titleButtonAreaBorderColor: "#26000000", baseBackgroundColor: "#FFFFFF", baseTextColor: "#000000", lightButtonBorderColor: "rgba(0, 0, 0, 0.15)" };
var Ae = { iconColor: "#FFFFFF", statusBarColor: "WHITE", titleTextColor: "#FFFFFF", titleSubtextColor: "#949494", titleButtonColor: "#FFFFFF", titleBackgroundColor: "#111111", progressBarColor: "#06C755", progressBackgroundColor: "#111111", titleButtonAreaBackgroundColor: "#1FFFFFFF", titleButtonAreaBorderColor: "#26000000", baseBackgroundColor: "#000000", baseTextColor: "#FFFFFF", lightButtonBorderColor: "rgba(255, 255, 255, 0.5)" };
function Ee() {
  var e10;
  Ue("color-scheme", ((null == (e10 = E2()) ? void 0 : e10.menuColorSetting) || { adaptableColorSchemes: ["light"] }).adaptableColorSchemes.join(" "));
  var t2 = window.matchMedia("(prefers-color-scheme: dark)");
  Le({ matches: null == t2 ? void 0 : t2.matches, media: null == t2 ? void 0 : t2.media }), t2.addEventListener ? t2.addEventListener("change", Le) : t2.addListener && t2.addListener(Le);
}
function Le(t2) {
  var n6 = E2(), r10 = (null == n6 ? void 0 : n6.menuColorSetting) || { adaptableColorSchemes: ["light"], lightModeColor: Te, darkModeColor: Ae }, o7 = r10.adaptableColorSchemes, i6 = r10.lightModeColor, a10 = r10.darkModeColor, s11 = o7.includes("dark");
  t2.matches && s11 ? Ne(__assign(__assign({}, Ae), a10)) : Ne(__assign(__assign({}, Te), i6));
}
function Ne(e10) {
  var t2 = e10.iconColor, n6 = e10.statusBarColor, r10 = e10.titleTextColor, o7 = e10.titleSubtextColor, i6 = e10.titleButtonColor, a10 = e10.titleBackgroundColor, s11 = e10.progressBarColor, f12 = e10.progressBackgroundColor, u12 = e10.titleButtonAreaBackgroundColor, d7 = e10.titleButtonAreaBorderColor, h6 = e10.baseBackgroundColor, p12 = e10.baseTextColor, v7 = e10.lightButtonBorderColor;
  Ue("--liff-base-background-color", h6), Ue("--liff-base-text-color", p12), Ue("--liff-base-background-rgb-color", d(h6)), Ue("--liff-base-text-rgb-color", d(p12)), Ue("--liff-light-button-border-color", v7), Ue("--liff-title-text-color", r10), Ue("--liff-title-background-color", a10), Ue("--liff-title-button-color", i6), Ue("--liff-icon-color", t2), Ue("--liff-status-bar-color", n6), Ue("--liff-title-subtext-color", o7), Ue("--liff-progress-bar-color", s11), Ue("--liff-progress-background-color", f12), Ue("--liff-title-button-area-background-color", l3(u12)), Ue("--liff-title-button-area-border-color", l3(d7));
}
function Ue(e10, t2) {
  document.documentElement.style.setProperty(e10, t2);
}
var De = { addToHomeScreen: function(e10) {
  if (!new o3(e10).invoke("addToHomeScreen"))
    throw m2(E, "No permission for liff.addToHomeScreen()");
}, scanCode: function(e10) {
  if (!new o3(e10).invoke("scanCode"))
    return Promise.reject(m2(E, "No permission for liff.scanCode()"));
}, getAdvertisingId: function(e10) {
  if (!new o3(e10).invoke("getAdvertisingId"))
    return Promise.reject(m2(E, "No permission for liff.getAdvertisingId()"));
}, initPlugins: function() {
} };
function Oe2(e10) {
  return __awaiter(this, void 0, void 0, function() {
    var t2;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return [4, y3()];
        case 1:
          return (t2 = n6.sent()) ? (t2.install(e10, De), [2]) : [2];
      }
    });
  });
}
function Pe2() {
  return __awaiter(this, void 0, void 0, function() {
    return __generator(this, function(e10) {
      switch (e10.label) {
        case 0:
          return [4, f4(l7("certs"))];
        case 1:
          return [2, e10.sent()];
      }
    });
  });
}
function We(e10, r10, o7) {
  return __awaiter(this, void 0, void 0, function() {
    var t2;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return [4, crypto.subtle.importKey("jwk", e10, { name: "ECDSA", namedCurve: "P-256" }, false, ["verify"])];
        case 1:
          return t2 = n6.sent(), [4, crypto.subtle.verify({ name: "ECDSA", hash: { name: "SHA-256" } }, t2, o7, r10)];
        case 2:
          return [2, n6.sent()];
      }
    });
  });
}
function je(e10, o7) {
  return __awaiter(this, void 0, void 0, function() {
    var t2, i6, a10, s11, c15, l12, h6, p12, v7, m12, w5, b7, g8, k6, C5, F5;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return t2 = e10.split("."), i6 = __read(t2, 3), a10 = i6[0], s11 = i6[1], c15 = i6[2], l12 = JSON.parse(u2.decode(a10)), h6 = JSON.parse(u2.decodeUnicode(s11)), p12 = s3(u2.decode(c15)), v7 = s3("".concat(a10, ".").concat(s11)), [4, Pe2()];
        case 1:
          if (m12 = n6.sent(), !(w5 = m12.keys.find(function(e11) {
            return e11.kid === l12.kid;
          })))
            return [3, 6];
          if (delete w5.alg, "ES256" !== l12.alg)
            throw m2(_, 'Invalid "alg" value in ID_TOKEN');
          b7 = void 0, n6.label = 2;
        case 2:
          return n6.trys.push([2, 4, , 5]), [4, We(w5, v7, p12)];
        case 3:
          return b7 = n6.sent(), [3, 5];
        case 4:
          throw g8 = n6.sent(), m2(_, "".concat("Failed to use Crypto API to verify ID_TOKEN", ": ").concat(g8));
        case 5:
          if (b7) {
            if (k6 = h6.iss !== "https://access.".concat("line.me"), C5 = h6.aud !== o7, F5 = 1e3 * h6.exp < Date.now(), k6)
              throw m2(_, 'Invalid "iss" value in ID_TOKEN');
            if (C5)
              throw m2(_, 'Invalid "aud" value in ID_TOKEN');
            if (F5)
              throw m2(_, 'Invalid "exp" value in ID_TOKEN');
            return [2, h6];
          }
          throw m2(_, "Invalid signature in ID_TOKEN");
        case 6:
          throw m2(_, 'Invalid "kid" value in ID_TOKEN');
        case 7:
          return [2];
      }
    });
  });
}
function He(e10) {
  var t2 = e10.split(".");
  if (t2[1])
    try {
      var n6 = t2[1].replace(/-/g, "+").replace(/_/g, "/");
      return JSON.parse(window.atob(n6));
    } catch (r10) {
      return null;
    }
  return null;
}
function Ke(e10) {
  var t2 = e10.pathname, n6 = e10.query, r10 = n6 ? "?".concat(A2.stringify(n6)) : "", o7 = "".concat("liff://").concat(t2).concat(r10);
  location.href = o7;
}
var Me = null;
function Re() {
  "boolean" == typeof Me && i.warn("liff.init is not expected to be called more than once"), Me = !!O3() || !(!u3() || A2.parse(window.location.hash).feature_token || w2()) && (P2(true), true);
}
function Je() {
  return Boolean(Me);
}
function Ve(e10, r10) {
  return __awaiter(this, void 0, void 0, function() {
    var t2;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return (t2 = D2()) ? [2, t2] : e10 && r10 ? [4, Ie({ msit: e10, mstVerifier: r10 })] : [3, 2];
        case 1:
          return [2, n6.sent().mst];
        case 2:
          return [2, null];
      }
    });
  });
}
function qe(e10) {
  return f4("".concat(l7("apps"), "/").concat(e10, "/featureToken"));
}
function ze(e10) {
  return __awaiter(this, void 0, void 0, function() {
    var t2, r10, o7, i6;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return t2 = A2.parse(window.location.hash), r10 = P({ access_token: x2(), context_token: K(), feature_token: w2(), id_token: X(), client_id: j2(), mst_challenge: M2(), mst_verifier: h2(), msit: v2() }, t2), Je() ? e3() ? [4, qe(e10)] : [3, 2] : [3, 3];
        case 1:
          o7 = n6.sent().featureToken, r10.feature_token || (r10.feature_token = o7), n6.label = 2;
        case 2:
          (i6 = w(e10)) && (r10.client_id = i6), n6.label = 3;
        case 3:
          return [2, r10];
      }
    });
  });
}
function Ge(e10) {
  if (e10.persisted && T4("multipleLiffTransition"))
    if ("ios" === e7())
      window.location.reload();
    else {
      var t2 = c5().liffId, n6 = w2();
      if (!t2)
        throw m2(i3, "Invalid LIFF ID.");
      if (!n6)
        throw m2(E, "Invalid featureToken for client features");
      Ke({ pathname: "app/".concat(t2), query: { feature_token: n6 } });
    }
}
function Qe(e10, r10) {
  return __awaiter(this, void 0, void 0, function() {
    var t2, o7;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return [4, v4(e10)];
        case 1:
          return t2 = n6.sent().client_id, o7 = w(r10), [2, t2 === o7];
      }
    });
  });
}
function Xe(e10) {
  var r10, o7;
  return __awaiter(this, void 0, void 0, function() {
    var t2, i6, a10, c15, l12, u12, d7, p12, v7, m12, b7, g8, C5;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return [4, new Promise(function(e11) {
            var t3 = r5();
            if (!t3 || f(t3, "9.5.0") < 0)
              e11();
            else if (window._liff && window._liff.features)
              e11();
            else {
              i.debug("cannot find window._liff.features, listen to ready event");
              var n7 = function() {
                i.debug("ready event is fired"), u7("ready", n7), e11();
              };
              s6("ready", n7);
            }
          })];
        case 1:
          return n6.sent(), Re(), [4, ze(e10.liffId)];
        case 2:
          if (t2 = n6.sent(), i6 = t2.access_token, a10 = t2.context_token, c15 = t2.feature_token, l12 = t2.id_token, u12 = t2.client_id, d7 = t2.mst_verifier, p12 = t2.mst_challenge, v7 = t2.msit, a10) {
            if ("string" != typeof a10)
              throw m2(i3, "Cannot get context token, perhaps there is an incorrect parameter in permanent link");
            I3(He(a10));
          }
          if (void 0 !== (null === (r10 = E2()) || void 0 === r10 ? void 0 : r10.liffId) && (null === (o7 = E2()) || void 0 === o7 ? void 0 : o7.liffId) !== e10.liffId)
            throw m2(i3, "Invalid LIFF ID");
          return !d3() && c15 && (!function(e11, t3) {
            T4("multipleLiffTransition") && Ke({ pathname: "app/".concat(e11), query: { feature_token: t3 } });
          }(e10.liffId, c15), Je() && U2(c15)), p12 && R2(p12), d7 && A3(d7), u12 && F3(u12), v7 && C3(v7), window.addEventListener("pageshow", Ge), e3() ? [3, 7] : c15 && i6 ? [3, 5] : Je() ? (m12 = O2(location.href, { "liff.hback": "2" }), _4({ redirectUri: m12 }), [4, new Promise(function() {
          })]) : [3, 4];
        case 3:
          n6.sent(), n6.label = 4;
        case 4:
          throw _4(), m2(i3, "Failed to parse feature_token or access_token");
        case 5:
          return [4, Qe(i6, e10.liffId)];
        case 6:
          if (!n6.sent())
            throw _4(), m2(i3, "Failed to verify access_token");
          U2(c15), B(i6), n6.label = 7;
        case 7:
          return [4, Ve(v7, d7)];
        case 8:
          return (b7 = n6.sent()) ? (L3(b7), [4, Oe({ mst: b7 })]) : [3, 10];
        case 9:
          (g8 = n6.sent().data) && N2(JSON.stringify(g8)), n6.label = 10;
        case 10:
          return l12 && !X() && G(l12), l12 && u12 && !Z() ? [4, je(l12, u12)] : [3, 12];
        case 11:
          (C5 = n6.sent()) && $2(C5), n6.label = 12;
        case 12:
          return [2];
      }
    });
  });
}
function Ye(e10) {
  return __awaiter(this, void 0, void 0, function() {
    var t2, r10, o7, i6, a10, s11, c15;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return t2 = l7("apps"), r10 = "".concat(t2, "/").concat(e10, "/contextToken"), o7 = x2(), i6 = { "Content-Type": "application/json", Accept: "application/json" }, o7 && (i6.Authorization = "Bearer ".concat(o7)), [4, f4(r10, { headers: i6 })];
        case 1:
          if (a10 = n6.sent(), !(s11 = a10.contextToken))
            throw m2(i3, "Can not get context from server.");
          if (!(c15 = He(s11)))
            throw m2(i3, "Invalid context token.");
          return [2, c15];
      }
    });
  });
}
function Ze() {
  return __awaiter(this, void 0, void 0, function() {
    var e10, t2;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          if (!(e10 = c5().liffId))
            throw m2(i3, "Invalid LIFF ID.");
          return [4, Ye(e10)];
        case 1:
          return t2 = n6.sent(), I3(t2), [2];
      }
    });
  });
}
function $e(e10) {
  return __awaiter(this, void 0, void 0, function() {
    var r10, o7, i6, a10 = this;
    return __generator(this, function(s11) {
      switch (s11.label) {
        case 0:
          r10 = function() {
            return __awaiter(a10, void 0, void 0, function() {
              var t2, r11, o8, i7, a11, s12;
              return __generator(this, function(n6) {
                switch (n6.label) {
                  case 0:
                    return [4, (c15 = c5(), l12 = A2.parse(window.location.search), f12 = J(), u12 = { grant_type: "authorization_code", client_id: l12.liffClientId, appId: c15.liffId, code: l12.code, code_verifier: f12.codeVerifier, redirect_uri: c15.redirectUri || l12.liffRedirectUri, id_token_key_type: "JWK" }, d7 = A2.stringify(u12), f4(l7("token"), { method: "POST", headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" }, body: d7 }))];
                  case 1:
                    return t2 = n6.sent(), r11 = t2.access_token, o8 = t2.id_token, i7 = t2.expires_in, F3(e10), B(r11), q(new Date(Date.now() + 1e3 * i7)), W(), o8 ? (G(o8), [4, je(o8, e10)]) : [3, 3];
                  case 2:
                    (a11 = n6.sent()) && $2(a11), n6.label = 3;
                  case 3:
                    return (s12 = A2.parse(location.hash).context_token) ? (I3(He(s12)), [3, 6]) : [3, 4];
                  case 4:
                    return [4, Ze()];
                  case 5:
                    n6.sent(), n6.label = 6;
                  case 6:
                    return [2];
                }
                var c15, l12, f12, u12, d7;
              });
            });
          }, s11.label = 1;
        case 1:
          return s11.trys.push([1, 3, , 4]), [4, r10()];
        case 2:
          return s11.sent(), [3, 4];
        case 3:
          throw o7 = s11.sent(), i6 = o7, W(), i6;
        case 4:
          return [2];
      }
    });
  });
}
function et() {
  return __awaiter(this, void 0, void 0, function() {
    var e10, r10, o7, i6, a10, c15, l12 = this;
    return __generator(this, function(f12) {
      switch (f12.label) {
        case 0:
          return (r10 = re()) ? [3, 2] : [4, ne(f5.SUB)];
        case 1:
          r10 = f12.sent(), f12.label = 2;
        case 2:
          return (e10 = r10).isReady() ? (o7 = U(8), [4, e10.getData("appData")]) : [3, 8];
        case 3:
          return i6 = f12.sent(), a10 = i6.eventName, c15 = i6.data, a10 !== d4.NOT_FOUND ? [3, 6] : [4, e10.teardown()];
        case 4:
          return f12.sent(), [4, et()];
        case 5:
          return [2, f12.sent()];
        case 6:
          c15 && N2(JSON.stringify(c15)), f12.label = 7;
        case 7:
          return e10.listen(function(r11) {
            return __awaiter(l12, void 0, void 0, function() {
              var t2, i7;
              return __generator(this, function(n6) {
                return t2 = r11.context, i7 = t2.data, t2.eventName === C.INIT && (null == i7 ? void 0 : i7.subWindowId) !== o7 && r8(), t2.eventName !== C.CANCEL && t2.eventName !== C.SUBMIT || e10.teardown(), [2];
              });
            });
          }), e3() && e10.send({ eventName: C.INIT, data: { subWindowId: o7, hasOpener: !!window.opener } }), [3, 10];
        case 8:
          return se() ? [3, 10] : [4, new Promise(function(e11) {
            window.addEventListener("message", function(e12) {
              return function t2(n6) {
                var r11 = n6.data, o8 = n6.source, i7 = n6.origin;
                if (r11) {
                  var a11 = r11.type, s11 = r11.message;
                  a11 === p && (window.removeEventListener("message", t2), s11 && N2(s11), oe(i7), o8 && o8.postMessage && o8.postMessage({ status: p }, i7), e12());
                }
              };
            }(e11));
          })];
        case 9:
          return [2, f12.sent()];
        case 10:
          return [2];
      }
    });
  });
}
var tt = new (function() {
  function e10() {
    var e11 = this;
    this.getAndValidateContext = function() {
      var e12 = E2();
      if (!e12)
        throw m2(i3, "Could not get Context from server.");
      if (!e12.endpointUrl)
        throw m2(i3, "Could not get endpointUrl from server.");
      if (!e12.permanentLinkPattern)
        throw m2(i3, "Could not get permanentLinkPattern from server.");
      return e12;
    }, this.decodeState = function(t2) {
      var n6 = e11.getAndValidateContext();
      t2 = t2.replace(/\n/g, "%0D%0A");
      var r10 = !n6.endpointUrl.startsWith("/?") && n6.endpointUrl.includes("/?") || !n6.endpointUrl.startsWith("/#") && n6.endpointUrl.includes("/#") || n6.endpointUrl.endsWith("/") || !t2.startsWith("/?") && t2.includes("/?") || !t2.startsWith("/#") && t2.includes("/#") || t2.endsWith("/"), o7 = new URL(n6.endpointUrl), i6 = o7.origin, a10 = o7.pathname, s11 = o7.search, c15 = new URL("".concat(i6).concat(e11.attachSlashAtStart(t2))), l12 = c15.pathname, f12 = c15.search, u12 = c15.hash, d7 = "".concat(s11).concat(s11 ? f12.replace(/\?/g, "&") : f12), h6 = "".concat(a10).concat(e11.attachSlashAtStart(l12)).replace("//", "/");
      return (h6 = e11.attachSlashAtStart("".concat(h6))).endsWith("/") && !r10 && (h6 = h6.substring(0, h6.length - 1)), "".concat(i6).concat(h6).concat(d7).concat(u12).replace(/%0D%0A/g, "\n");
    };
  }
  return e10.prototype.attachSlashAtStart = function(e11) {
    return "".concat(e11 && e11.length > 0 && !e11.startsWith("/") ? "/" : "").concat(e11);
  }, e10.prototype.invoke = function() {
    return __awaiter(this, void 0, void 0, function() {
      var e11, t2, r10, o7, i6;
      return __generator(this, function(n6) {
        switch (n6.label) {
          case 0:
            if (e11 = A2.parse(window.location.search), "string" != typeof (t2 = e11["liff.state"]))
              return [2];
            n6.label = 1;
          case 1:
            return n6.trys.push([1, 4, , 5]), r10 = location.href, (o7 = this.decodeState(t2)) === r10 ? [3, 3] : (e11["liff.hback"] ? location.replace(O2(o7, { "liff.hback": e11["liff.hback"] })) : location.replace(o7), [4, new Promise(function() {
            })]);
          case 2:
            n6.sent(), n6.label = 3;
          case 3:
            return [3, 5];
          case 4:
            if ((i6 = n6.sent()).code === i3)
              throw i6;
            return i.debug(i6), [3, 5];
          case 5:
            return [2];
        }
      });
    });
  }, e10;
}())();
function nt(e10, r10) {
  return __awaiter(this, void 0, void 0, function() {
    var t2;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          if (!e10.liffId)
            throw m2(T, "liffId is necessary for liff.init()");
          return l4(e10), !u3() && e3() && (z() || o4()), t2 = A2.parse(window.location.search), !d3() || u3() ? [3, 2] : [4, et()];
        case 1:
          n6.sent(), n6.label = 2;
        case 2:
          if (t2.error && t2.liffOAuth2Error)
            throw a10 = t2.error, c15 = t2.error_description, l12 = c15.replace(/\+/g, " "), u12 = "".concat(a10, ": ").concat(l12), m2(i3, u12);
          return o7 = t2.code, i6 = J(), Boolean(o7 && !e3() && i6 && i6.codeVerifier) ? [4, $e(t2.liffClientId)] : [3, 4];
        case 3:
          n6.sent(), n6.label = 4;
        case 4:
          return u3() ? [4, Xe(e10)] : [3, 6];
        case 5:
          return n6.sent(), [3, 8];
        case 6:
          return e3() ? [3, 8] : [4, Ze()];
        case 7:
          n6.sent(), n6.label = 8;
        case 8:
          return [4, tt.invoke()];
        case 9:
          return n6.sent(), [4, r10()];
        case 10:
          return n6.sent(), L2(window.location.href), [2];
      }
      var o7, i6, a10, c15, l12, u12;
    });
  });
}
var rt = function(e10, t2) {
  return new Promise(function(n6, r10) {
    if (e10) {
      var o7 = document.createElement("script");
      o7.type = "module", o7.onload = function() {
        n6();
      }, o7.src = e10, document.head.appendChild(o7);
    } else
      r10(m2(T, t2));
  });
};
var ot = function(e10) {
  var t2 = "https://static.line-scdn.net/lui/edge/versions/1.13.0/lui-alert.js";
  return t2 && e10 && (t2 = t2.replace(/\d{1,2}\.\d{1,2}\.\d{1,3}/, e10)), rt(t2, "LUI_ALERT_URL is not defined");
};
var it = function() {
  return __awaiter(void 0, void 0, void 0, function() {
    var e10;
    return __generator(this, function(t2) {
      switch (t2.label) {
        case 0:
          return e10 = function() {
            var e11, t3 = document.querySelector('script[src*="luivendor.js"]');
            if (t3 && (null === (e11 = t3.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g)) || void 0 === e11 ? void 0 : e11.length))
              return t3.src.match(/\d{1,2}\.\d{1,2}\.\d{1,3}/g)[0];
          }(), e10 ? [3, 2] : [4, rt("https://static.line-scdn.net/lui/edge/versions/1.13.0/luivendor.js", "LUI_VENDOR_URL is not defined")];
        case 1:
          t2.sent(), t2.label = 2;
        case 2:
          return [4, ot(e10)];
        case 3:
          return t2.sent(), [4, (n6 = U(6), new Promise(function() {
            var e11 = document.createElement("div");
            e11.innerHTML = '<lui-alert id="'.concat("liffAlert", "-").concat(n6, '" shown title="').concat(f7("alert.android.extBrowser.autoLoginWorkaround.title"), '" message="').concat(f7("alert.android.extBrowser.autoLoginWorkaround.desc"), '" button="').concat(f7("alert.android.extBrowser.autoLoginWorkaround.button.text"), '"></lui-alert>'), document.body.appendChild(e11);
            var t3 = document.getElementById("".concat("liffAlert", "-").concat(n6));
            t3 && t3.addEventListener("lui-button-click", function() {
              var e12 = window.open("".concat(window.location.href, "&liffIsEscapedFromApp=true"), "_blank");
              e12 && (e12.location.href = "".concat(window.location.href, "&liffIsEscapedFromApp=true"), window.close());
            });
          }))];
        case 4:
          return t2.sent(), [2];
      }
      var n6;
    });
  });
};
function at() {
  return __awaiter(this, void 0, void 0, function() {
    var e10;
    return __generator(this, function(t2) {
      switch (t2.label) {
        case 0:
          return u3() || "android" !== e7() || ((e10 = A2.parse(window.location.search))[o5] || e10.liffIsEscapedFromApp) ? [3, 6] : e10.liffClientId && document.referrer.includes("access.".concat("line.me")) ? (window.location.href = "".concat(window.location.href, "&liffIsEscapedFromApp=true"), [2]) : e10.liffClientId && document.referrer.includes("android-app://") ? [4, it()] : [3, 2];
        case 1:
          t2.sent(), t2.label = 2;
        case 2:
          return e10.liffClientId && "" === document.referrer && 1 === window.history.length ? [4, it()] : [3, 4];
        case 3:
          t2.sent(), t2.label = 4;
        case 4:
          return !document.referrer.includes("liffClientId") || document.referrer.includes("liffIsEscapedFromApp") ? [3, 6] : [4, it()];
        case 5:
          t2.sent(), t2.label = 6;
        case 6:
          return [2];
      }
    });
  });
}
var st = function(e10) {
  function r10() {
    var t2 = null !== e10 && e10.apply(this, arguments) || this;
    return t2.hooks = { before: new a6(), after: new a6() }, t2.internalHooks = { beforeFinished: new a6(), beforeSuccess: new a6(), error: new a6() }, t2;
  }
  return __extends(r10, e10), Object.defineProperty(r10.prototype, "name", { get: function() {
    return "init";
  }, enumerable: false, configurable: true }), r10.prototype.install = function(e11) {
    var t2 = e11.liff;
    return this.liffForWindow = t2, this.init.bind(this);
  }, r10.prototype.init = function(e11, r11, o7) {
    return __awaiter(this, void 0, void 0, function() {
      var t2;
      return __generator(this, function(n6) {
        switch (n6.label) {
          case 0:
            return [4, this.hooks.before.call()];
          case 1:
            n6.sent(), i6 = this.liffForWindow, window && !window.liff && (window.liff = i6), n6.label = 2;
          case 2:
            return n6.trys.push([2, 9, , 11]), [4, Promise.all([Oe2(this.liffForWindow), nt(e11, this.internalHooks.beforeFinished.call)])];
          case 3:
            return n6.sent(), Ee(), [4, this.internalHooks.beforeSuccess.call()];
          case 4:
            return n6.sent(), !e11.withLoginOnExternalBrowser || e3() ? [3, 6] : (_4(), [4, new Promise(function() {
            })]);
          case 5:
            n6.sent(), n6.label = 6;
          case 6:
            return [4, at()];
          case 7:
            return n6.sent(), [4, this.hooks.after.call()];
          case 8:
            return n6.sent(), "function" == typeof r11 && r11(), e(), [3, 11];
          case 9:
            return t2 = n6.sent(), [4, this.internalHooks.error.call(t2)];
          case 10:
            throw n6.sent(), "function" == typeof o7 && o7(t2), t2;
          case 11:
            return [2];
        }
        var i6;
      });
    });
  }, r10;
}(a);

// node_modules/@liff/get-language/lib/index.es.js
function r9() {
  return navigator.language;
}
var e9 = function(n6) {
  function e10() {
    return null !== n6 && n6.apply(this, arguments) || this;
  }
  return __extends(e10, n6), Object.defineProperty(e10.prototype, "name", { get: function() {
    return "getLanguage";
  }, enumerable: false, configurable: true }), e10.prototype.install = function() {
    return function() {
      return r9();
    };
  }, e10;
}(a);

// node_modules/@liff/permission/lib/index.es.js
function k5(r10) {
  return __awaiter(this, void 0, void 0, function() {
    var e10, i6, o7, u12, f12, h6, v7;
    return __generator(this, function(t2) {
      switch (t2.label) {
        case 0:
          return function(e11) {
            if (!F.includes(e11))
              throw m2(I, "Unexpected permission name.");
            var t3 = E2();
            return !!(null == t3 ? void 0 : t3.scope.includes(e11));
          }(r10) ? (e10 = x2()) ? [4, v4(e10)] : [3, 2] : [2, { state: "unavailable" }];
        case 1:
          i6 = t2.sent(), o7 = unescape(i6.scope).split(" ");
          try {
            for (u12 = __values(o7), f12 = u12.next(); !f12.done; f12 = u12.next())
              if (f12.value.includes(r10))
                return [2, { state: "granted" }];
          } catch (m12) {
            h6 = { error: m12 };
          } finally {
            try {
              f12 && !f12.done && (v7 = u12.return) && v7.call(u12);
            } finally {
              if (h6)
                throw h6.error;
            }
          }
          return [2, { state: "prompt" }];
        case 2:
          throw m2(t, "LiffId is not found.");
      }
    });
  });
}
function A4() {
  var e10, t2, n6 = E2();
  return !!n6 && ("square_chat" !== n6.type && (T4("skipChannelVerificationScreen") || !u3() && (null === (t2 = null === (e10 = n6.availability) || void 0 === e10 ? void 0 : e10.skipChannelVerificationScreen) || void 0 === t2 ? void 0 : t2.permission)));
}
function S4() {
  var e10 = c5().liffId;
  if (e10)
    return f4("".concat(l7("unauthorizedPermissions"), "?liffId=").concat(e10), { headers: { "Content-Type": "application/json", Accept: "application/json", Authorization: "Bearer ".concat(x2()) } });
  throw m2(t, "liffId is required");
}
var T5;
var q3 = Pe.on;
var P3 = Pe.off;
var x3 = Pe.open;
var E4 = function() {
  function n6(n7, r10) {
    var i6 = this;
    this.onSubmit = function(n8) {
      var r11 = n8.newAccessToken, o7 = n8.ICA_ERROR;
      return __awaiter(i6, void 0, void 0, function() {
        return __generator(this, function(e10) {
          return r11 ? this.resolve({ newAccessToken: r11 }) : o7 && this.reject(m2(e2, o7)), this.teardown(), [2];
        });
      });
    }, this.onClose = function() {
      return __awaiter(i6, void 0, void 0, function() {
        return __generator(this, function(e10) {
          return this.reject(m2(t, "user didn't allow the agreement")), this.teardown(), [2];
        });
      });
    }, this.onCancel = function() {
      return __awaiter(i6, void 0, void 0, function() {
        return __generator(this, function(e10) {
          return this.reject(m2(t, "user didn't allow the agreement")), this.teardown(), [2];
        });
      });
    }, this.onError = function(n8) {
      return __awaiter(i6, void 0, void 0, function() {
        return __generator(this, function(e10) {
          return this.reject(n8), this.teardown(), [2];
        });
      });
    }, this.resolve = n7, this.reject = r10, this.setup();
  }
  return n6.prototype.setup = function() {
    q3("submit", this.onSubmit), q3("close", this.onClose), q3("cancel", this.onCancel), q3("error", this.onError);
  }, n6.prototype.teardown = function() {
    P3("submit", this.onSubmit), P3("close", this.onClose), P3("cancel", this.onCancel), P3("error", this.onError), T5 = void 0;
  }, n6.prototype.open = function() {
    var e10 = c5().liffId;
    e10 ? x3({ url: "".concat("https://liff.line.me/1656032314-Xgrw5Pmk"), appData: { liffId: e10, channelId: w(e10), accessToken: x2() } }) : this.reject(m2(t, "liffId is required"));
  }, n6;
}();
function _5() {
  return __awaiter(this, void 0, void 0, function() {
    var e10, n6;
    return __generator(this, function(t2) {
      switch (t2.label) {
        case 0:
          if (!A4())
            throw m2(E, "SkipChannelVerificationScreen is unavailable.");
          return T5 && T5.teardown(), [4, S4()];
        case 1:
          return e10 = t2.sent(), (u3() ? e10 : e10.filter(function(e11) {
            return "chat_message.write" !== e11;
          })).length > 0 ? [4, new Promise(function(e11, t3) {
            (T5 = new E4(e11, t3)).open();
          })] : [3, 3];
        case 2:
          return n6 = t2.sent().newAccessToken, B(n6), [3, 4];
        case 3:
          throw m2(E, "All permissions have already been approved.");
        case 4:
          return [2];
      }
    });
  });
}
function R3(n6, o7) {
  var s11 = this;
  return function() {
    for (var a10 = [], c15 = 0; c15 < arguments.length; c15++)
      a10[c15] = arguments[c15];
    return __awaiter(s11, void 0, void 0, function() {
      var e10, s12, c16;
      return __generator(this, function(t2) {
        switch (t2.label) {
          case 0:
            return e10 = (a10.length > 0 ? a10[a10.length - 1] : {}).ignorePermissionCheck, s12 = void 0 !== e10 && e10, [4, k5(o7)];
          case 1:
            if ("unavailable" !== (c16 = t2.sent().state))
              return [3, 2];
            throw m2(E, "The permission is not in LIFF app scope.");
          case 2:
            return "prompt" !== c16 || !A4() || s12 || !u3() && "chat_message.write" === o7 ? [3, 4] : [4, _5()];
          case 3:
            return t2.sent(), [3, 5];
          case 4:
            s12 && a10.pop(), t2.label = 5;
          case 5:
            return [4, n6.apply(void 0, __spreadArray([], __read(a10), false))];
          case 6:
            return [2, t2.sent()];
        }
      });
    });
  };
}
var V3 = function(e10) {
  function t2() {
    return null !== e10 && e10.apply(this, arguments) || this;
  }
  return __extends(t2, e10), Object.defineProperty(t2.prototype, "name", { get: function() {
    return "permission";
  }, enumerable: false, configurable: true }), t2.prototype.install = function() {
    return { query: k5, requestAll: _5 };
  }, t2;
}(a);
var z3 = new V3();

// node_modules/@liff/get-profile/lib/index.es.js
function n4() {
  return f4(l7("profile"));
}
var f8 = function(t2) {
  function e10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(e10, t2), Object.defineProperty(e10.prototype, "name", { get: function() {
    return "getProfile";
  }, enumerable: false, configurable: true }), e10.prototype.install = function() {
    return R3(n4, "profile");
  }, e10;
}(a);

// node_modules/@liff/open-window/lib/index.es.js
var a8 = function(n6, i6) {
  return n6 ? "&".concat(n6.split("&").filter(function(n7) {
    return -1 === n7.indexOf("is_liff_external_open_window");
  }).join("&").concat("".concat(i6 ? "#".concat(i6) : ""))) : "".concat(i6 ? "#".concat(i6) : "");
};
function p10(n6) {
  if (!function(n7) {
    if (!n7 || "object" != typeof n7)
      return false;
    var t2 = n7, o7 = t2.url, e10 = t2.external, r10 = __read([typeof o7, typeof e10], 2), f12 = r10[0], l12 = r10[1];
    return "string" === f12 && "" !== o7 && ("undefined" === l12 || "boolean" === l12);
  }(n6))
    throw m2(I, "Invalid parameters for liff.openWindow()");
  var u12 = r5();
  if (u3())
    if (null !== u12 && "ios" === e7() && f(u12, "9.19") >= 0 || !window._liff.postMessage) {
      var p12 = n6.url, s11 = n6.external, d7 = void 0 !== s11 && s11;
      window.open(function(n7, t2) {
        var o7, e10, r10, f12, l12, c15, u13, p13, s12;
        (function(n8) {
          return -1 !== n8.indexOf("#") && -1 !== n8.indexOf("?") && n8.indexOf("#") < n8.indexOf("?");
        })(n7) || function(n8) {
          return -1 === n8.indexOf("?") && -1 !== n8.indexOf("#");
        }(n7) ? (u13 = (o7 = __read(n7.split("#"), 2))[0], e10 = o7[1], p13 = (r10 = __read((void 0 === e10 ? "" : e10).split("?"), 2))[0], s12 = r10[1]) : (u13 = (f12 = __read(n7.split("?"), 2))[0], l12 = f12[1], s12 = (c15 = __read((void 0 === l12 ? "" : l12).split("#"), 2))[0], p13 = c15[1]);
        var d8 = a8(s12, p13);
        return "".concat(u13, "?").concat("is_liff_external_open_window", "=").concat(!!t2).concat(d8);
      }(p12, d7));
    } else
      m7("openWindow", n6);
  else
    window.open(n6.url, "_blank");
}
var s8 = function(i6) {
  function t2() {
    return null !== i6 && i6.apply(this, arguments) || this;
  }
  return __extends(t2, i6), Object.defineProperty(t2.prototype, "name", { get: function() {
    return "openWindow";
  }, enumerable: false, configurable: true }), t2.prototype.install = function() {
    return function(n6) {
      return p10(n6);
    };
  }, t2;
}(a);

// node_modules/@liff/send-messages/lib/index.es.js
var m8 = function(r10) {
  return "object" == typeof r10 && null !== r10 && function(r11) {
    return "string" == typeof r11 || r11 instanceof String;
  }(r10.type);
};
function p11(r10) {
  return Promise.reject(m2(I, r10));
}
function l10(r10) {
  if (!function(r11) {
    return Array.isArray(r11) && r11.every(m8);
  }(r10))
    return p11("Parameter 'messages' must be an array of { type, ... }");
  var e10 = r10.length;
  return e10 < 1 || e10 > 5 ? p11("Number of messages should be in range 1 to ".concat(5, ".")) : f4(l7("message"), { method: "POST", body: JSON.stringify({ messages: r10 }) }).catch(c12);
}
var c12 = function(r10) {
  if ("403" === r10.code) {
    var e10 = "12.0.0" === r5(), o7 = "ios" === e7(), n6 = $();
    e10 && (o7 || n6) && window.alert("LINEアプリをLINE 12.0.1以降にアップデートしてください。\nPlease update your LINE app to LINE 12.0.1 or later.");
  }
  throw r10;
};
var g5 = function(e10) {
  function t2() {
    return null !== e10 && e10.apply(this, arguments) || this;
  }
  return __extends(t2, e10), Object.defineProperty(t2.prototype, "name", { get: function() {
    return "sendMessages";
  }, enumerable: false, configurable: true }), t2.prototype.install = function() {
    return R3(l10, "chat_message.write");
  }, t2;
}(a);

// node_modules/@liff/get-friendship/lib/index.es.js
function o6() {
  return f4(l7("friendship"));
}
var f9 = function(t2) {
  function e10() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(e10, t2), Object.defineProperty(e10.prototype, "name", { get: function() {
    return "getFriendship";
  }, enumerable: false, configurable: true }), e10.prototype.install = function() {
    return R3(o6, "profile");
  }, e10;
}(a);

// node_modules/@liff/analytics/lib/index.es.js
function g6() {
  return __awaiter(this, void 0, void 0, function() {
    var t2, i6;
    return __generator(this, function(e10) {
      switch (e10.label) {
        case 0:
          if (!e3())
            return [3, 6];
          e10.label = 1;
        case 1:
          return e10.trys.push([1, 5, , 6]), (t2 = Z()) && t2.sub ? [2, t2.sub] : [3, 2];
        case 2:
          return [4, n4()];
        case 3:
          if ((i6 = e10.sent()) && i6.userId)
            return [2, i6.userId];
          e10.label = 4;
        case 4:
          return [3, 6];
        case 5:
          return e10.sent(), i.debug("can't retrieve Mid/Uid because of something wrong"), [3, 6];
        case 6:
          return [2];
      }
    });
  });
}
function b6() {
  return __awaiter(this, void 0, void 0, function() {
    var t2;
    return __generator(this, function(e10) {
      switch (e10.label) {
        case 0:
          return [4, g6()];
        case 1:
          return (t2 = e10.sent()) && "u" === t2.substring(0, 1) ? [2, t2] : [2];
      }
    });
  });
}
var I4 = function(u12) {
  function d7() {
    var t2 = null !== u12 && u12.apply(this, arguments) || this;
    return t2.utsExtra = { isLiffSuccessful: false, isLoggedIn: false, id: "", version: "" }, t2.injected = false, t2;
  }
  return __extends(d7, u12), Object.defineProperty(d7, "CUSTOMPLACEID_INIT", { get: function() {
    return "liff.init";
  }, enumerable: false, configurable: true }), Object.defineProperty(d7, "CUSTOMTYPE", { get: function() {
    return "liffSdk";
  }, enumerable: false, configurable: true }), Object.defineProperty(d7, "LiffUtsLoginStatus", { get: function() {
    return { isLoggedIn: 1, isLiffSuccessful: 2 };
  }, enumerable: false, configurable: true }), Object.defineProperty(d7.prototype, "name", { get: function() {
    return "analytics";
  }, enumerable: false, configurable: true }), d7.prototype.install = function(t2) {
    var e10 = t2.liff, i6 = t2.internalHooks;
    this.liffCore = e10, i6.init.beforeFinished(this.beforeInitFinished.bind(this)), i6.init.beforeSuccess(this.beforeInitSuccess.bind(this)), i6.init.error(this.initError.bind(this));
  }, d7.prototype.changeRatioToUTSFormat = function(t2) {
    if (t2 && Number.isFinite(t2))
      return Math.round(100 * t2);
  }, d7.prototype.setExtra = function() {
    var t2, e10 = this.utsExtra, i6 = e10.isLiffSuccessful, s11 = e10.isLoggedIn, r10 = e10.id, n6 = e10.version, o7 = (s11 ? d7.LiffUtsLoginStatus.isLoggedIn : 0) | (i6 ? d7.LiffUtsLoginStatus.isLiffSuccessful : 0);
    null === (t2 = this.uts) || void 0 === t2 || t2.setExtra("liff", { id: r10, loginStatus: o7, version: n6 });
  }, d7.prototype.assignUtsExtra = function(t2) {
    Object.assign(this.utsExtra, t2);
  }, d7.prototype.setVersion = function(t2) {
    this.assignUtsExtra({ version: t2 }), i.debug("[LIFFUTS][SDK version] ".concat(t2)), this.setExtra();
  }, d7.prototype.setLiffId = function(t2) {
    this.assignUtsExtra({ id: t2 }), i.debug("[LIFFUTS][LIFFID] ".concat(t2)), this.setExtra();
  }, d7.prototype.setIsLoggedIn = function(t2) {
    this.assignUtsExtra({ isLoggedIn: t2 }), i.debug("[LIFFUTS][isLoggedIn] ".concat(t2)), this.setExtra();
  }, d7.prototype.sendLiffInit = function() {
    var t2;
    i.debug("[LIFFUTS][sendCustom] liff.init"), null === (t2 = this.uts) || void 0 === t2 || t2.sendCustom({ type: d7.CUSTOMTYPE, params: { placeId: d7.CUSTOMPLACEID_INIT } });
  }, d7.prototype.setIsLiffSuccessful = function(t2) {
    this.assignUtsExtra({ isLiffSuccessful: t2 }), i.debug("[LIFFUTS][isLiffInitSuccessful] ".concat(t2)), this.setExtra();
  }, d7.prototype.prepareReferrer = function(t2) {
    var e10 = {};
    Object.keys(t2).forEach(function(i6) {
      if (O.includes(i6)) {
        var s11 = t2[i6];
        "string" == typeof s11 && s11 && (e10[i6.replace(/^liff\.ref\./, "")] = s11);
      }
    }), Object.keys(e10).length > 0 && (this.referrer = e10);
  }, d7.prototype.beforeInitFinished = function() {
    return __awaiter(this, void 0, void 0, function() {
      var t2, i6, r10, u13, d8, h6, g8, I6, m12, L4, S5, v7;
      return __generator(this, function(e10) {
        switch (e10.label) {
          case 0:
            if (t2 = A2.parse(window.location.search), this.prepareReferrer(t2), i6 = E2(), !(r10 = null == i6 ? void 0 : i6.utsTracking))
              return [2];
            if (u13 = c5(), d8 = u13.liffId, h6 = u13.analytics, "auto" !== r10.mode || !h6)
              return [3, 6];
            i.debug("[LIFFUTS] ".concat((/* @__PURE__ */ new Date()).toUTCString())), e10.label = 1;
          case 1:
            return e10.trys.push([1, 3, , 4]), g8 = this, [4, new Promise(function(t3, e11) {
              var i7 = window.uts, s11 = document.createElement("script");
              s11.type = "text/javascript", s11.src = "https://static.line-scdn.net/uts/edge/4.1.0/uts.js", s11.onload = function() {
                var e12 = window.uts;
                t3(e12), window.uts = i7;
              }, s11.onerror = function(t4) {
                e11(t4);
              }, document.getElementsByTagName("head")[0].appendChild(s11);
            })];
          case 2:
            return g8.uts = e10.sent(), [3, 4];
          case 3:
            return I6 = e10.sent(), i.debug("[LIFFUTS] cannot load UTS, reason: ".concat(I6)), [2];
          case 4:
            return m12 = __assign(__assign({}, h6.context), { utsId: h6.context.utsId, appName: h6.context.appName, appEnv: h6.context.appEnv || "release" }), L4 = __assign(__assign({ endpoint: "https://uts-front.line-apps.com" }, h6.options), { sampleRate: this.changeRatioToUTSFormat(r10.sendRatio), version: "current" }), this.uts.init(m12, L4), [4, b6()];
          case 5:
            (S5 = e10.sent()) && (i.debug("[LIFFUTS][mid] ".concat(S5)), this.uts.setMid(S5)), (null == i6 ? void 0 : i6.tid) && (i.debug("[LIFFUTS][tid] ".concat(i6.tid)), this.uts.setTid(i6.tid)), this.referrer && (i.debug("liff.ref.referrer", this.referrer), this.uts.setSessionParams(this.referrer)), d8 && this.setLiffId(d8), this.setIsLoggedIn(e3()), this.setVersion(r4()), v7 = x(location.href), i.debug("[LIFFUTS][url] ".concat(v7)), this.uts.setUrl(v7), this.liffCore.analytics = this.uts, this.injected = true, e10.label = 6;
          case 6:
            return [2];
        }
      });
    });
  }, d7.prototype.beforeInitSuccess = function() {
    return this.injected && (this.setIsLiffSuccessful(true), this.sendLiffInit()), Promise.resolve();
  }, d7.prototype.initError = function() {
    return this.injected && (this.setIsLiffSuccessful(false), this.sendLiffInit()), Promise.resolve();
  }, d7;
}(a);
var m9 = function(t2) {
  i.debug("[LIFFUTS][sendCustom] liff.shareTargetPicker"), t2.sendCustom({ type: "liffSdk", params: { placeId: "liff.shareTargetPicker" } });
};

// node_modules/@liff/permanent-link/lib/index.es.js
function m10(r10) {
  return __awaiter(this, void 0, void 0, function() {
    var t2, i6;
    return __generator(this, function(n6) {
      switch (n6.label) {
        case 0:
          return [4, fetch(l7("permanentLink"), { headers: { "Content-Type": "application/json", Accept: "application/json" }, method: "POST", body: JSON.stringify(r10) })];
        case 1:
          return (t2 = n6.sent()).ok ? [3, 3] : [4, t2.json()];
        case 2:
          throw i6 = n6.sent().message, m2(e2, i6);
        case 3:
          return [4, t2.json()];
        case 4:
          return [2, n6.sent()];
      }
    });
  });
}
var d6 = function(e10) {
  function p12() {
    var r10 = null !== e10 && e10.apply(this, arguments) || this;
    return r10.extraParams = "", r10.getAndValidateContext = function() {
      var t2 = E2();
      if (!t2)
        throw m2(i3, "Could not get Context from server.");
      if (!t2.endpointUrl)
        throw m2(i3, "Could not get endpointUrl from server.");
      if (!t2.permanentLinkPattern)
        throw m2(i3, "Could not get permanentLinkPattern from server.");
      return t2;
    }, r10.createUrl = function() {
      var t2 = r10.getAndValidateContext(), n6 = window.location, e11 = n6.pathname, i6 = n6.search, c15 = n6.hash, u12 = n6.origin, p13 = new URL(t2.endpointUrl);
      if (p13.origin !== u12 || !r10.isAncestor(p13.pathname, e11))
        throw m2(T, "Current page is not under entrypoint.");
      var h6 = e11.substring(p13.pathname.length);
      h6.length > 0 && "/" !== h6[0] && (h6 = "/" + h6);
      var m12 = new RegExp("^".concat(a2.join("|"))), d7 = c15.substring(1).split("&").filter(function(t3) {
        return !m12.test(t3) && Boolean(t3);
      }).join("&"), g8 = d7 === p13.hash.substring(1) ? "" : d7, v7 = function(t3) {
        return t3.substring(1).split("&").filter(function(t4) {
          return !/liff\.state/.test(t4) && Boolean(t4);
        });
      }, w5 = v7(i6), x4 = v7(p13.search);
      r10.extraParams && w5.push(r10.extraParams);
      for (var y5 = 0; y5 < x4.length; y5++) {
        var U3 = x4[y5], b7 = w5.indexOf(U3);
        b7 > -1 && w5.splice(b7, 1);
      }
      var P4 = w5.join("&"), j3 = "".concat(h6).concat("" !== P4 ? "?".concat(P4) : "").concat(g8 ? "#".concat(g8) : "");
      return "".concat(s2).concat(c5().liffId).concat(j3);
    }, r10.createUrlBy = function(e11) {
      return __awaiter(r10, void 0, void 0, function() {
        var t2, r11;
        return __generator(this, function(n6) {
          switch (n6.label) {
            case 0:
              if (!(t2 = c5().liffId))
                throw m2(i3, "Should run after liff init.");
              try {
                r11 = new URL(e11);
              } catch (o7) {
                throw m2(I, "invalid URL.");
              }
              return [4, m10({ liffId: t2, currentPageUrl: r11.toString() })];
            case 1:
              return [2, n6.sent().permanentLinkUrl];
          }
        });
      });
    }, r10.setExtraQueryParam = function(t2) {
      r10.extraParams = t2;
    }, r10.isAncestor = function(t2, n6) {
      return 0 === n6.indexOf(t2) && (t2.endsWith("/") && (t2 = t2.substring(0, t2.length - 1)), void 0 === n6[t2.length] || "/" === n6[t2.length]);
    }, r10.install = function() {
      return { createUrl: r10.createUrl, createUrlBy: r10.createUrlBy, setExtraQueryParam: r10.setExtraQueryParam };
    }, r10;
  }
  return __extends(p12, e10), Object.defineProperty(p12.prototype, "name", { get: function() {
    return "permanentLink";
  }, enumerable: false, configurable: true }), p12;
}(a);
var g7 = new d6();

// node_modules/@liff/scan-code-v2/lib/index.es.js
var s9;
var u10 = function() {
  function o7(o8, t2) {
    var n6 = this;
    this.resolve = o8, this.reject = t2, this.onSubmit = function(o9) {
      var t3 = o9.message;
      n6.resolve({ value: t3 }), n6.destroy();
    }, this.onClose = function() {
      n6.resolve({ value: null }), n6.destroy();
    }, this.onCancel = function() {
      n6.resolve({ value: null }), n6.destroy();
    }, this.onError = function(o9) {
      n6.reject(o9), n6.destroy();
    }, this.start();
  }
  return o7.prototype.start = function() {
    Pe.on("submit", this.onSubmit), Pe.on("close", this.onClose), Pe.on("cancel", this.onCancel), Pe.on("error", this.onError);
  }, o7.prototype.destroy = function() {
    Pe.off("submit", this.onSubmit), Pe.off("close", this.onClose), Pe.off("cancel", this.onCancel), Pe.off("error", this.onError), s9 = void 0;
  }, o7;
}();
function f10() {
  return __awaiter(this, void 0, void 0, function() {
    return __generator(this, function(o7) {
      return C4.scanCodeV2(), s9 && s9.destroy(), [2, new Promise(function(o8, t2) {
        s9 = new u10(o8, t2), Pe.open({ url: "https://liff.line.me/1656359117-jxmx5e11" }).catch(function(o9) {
          null == s9 || s9.destroy(), t2(o9);
        });
      })];
    });
  });
}
var l11 = function(t2) {
  function n6() {
    return null !== t2 && t2.apply(this, arguments) || this;
  }
  return __extends(n6, t2), Object.defineProperty(n6.prototype, "name", { get: function() {
    return "scanCodeV2";
  }, enumerable: false, configurable: true }), n6.prototype.install = function() {
    return f10;
  }, n6;
}(a);
var c13 = new l11();

// node_modules/@liff/window-postmessage/lib/index.es.js
var n5 = {};
function i5() {
  return n5;
}
function s10(e10, r10) {
  var o7 = i5(), n6 = __read(r10.split("."), 1)[0], s11 = o7[r10];
  s11 && e10.removeEventListener(n6, s11), o7[r10] = null;
}
var f11 = false;
var a9 = false;
function c14(e10, r10, o7, i6) {
  f11 || (a9 = function() {
    var t2 = false;
    try {
      var e11 = Object.defineProperty({}, "passive", { get: function() {
        return t2 = true, false;
      } });
      window.addEventListener("test", e11, e11), window.removeEventListener("test", e11, e11);
    } catch (r11) {
      t2 = false;
    }
    return t2;
  }(), f11 = true);
  var c15 = __read(r10.split("."), 1)[0];
  return new Promise(function(t2) {
    var f12 = function(n6) {
      t2(n6), o7 && o7(n6), i6 && i6.once && s10(e10, r10);
    };
    !function(t3, e11) {
      n5[t3] = e11;
    }(r10, f12), e10.addEventListener(c15, f12, !!a9 && i6);
  });
}
function u11(t2, o7, n6, i6) {
  if (void 0 === n6 && (n6 = {}), "object" != typeof t2 || !t2.postMessage)
    throw m2(I, "target must be window object");
  if ("string" != typeof o7)
    throw m2(I, "keyname must be string");
  if ("object" != typeof n6)
    throw m2(I, "incorrect body format. It should be Object or Array comprised of Object");
  if (!i6)
    throw m2(I, "serverEndPointUrl isn't passed. please fill up with proper url");
  if ("*" === i6)
    throw new Error("serverEndPointUrl doesn't allow to set '*'");
  var s11 = { name: o7, body: n6 };
  t2.postMessage(s11, i6);
}
function m11(t2, e10, r10, n6) {
  c14(t2, "message.".concat(e10), function(t3, e11, r11) {
    return function(n7) {
      i.debug("messageReceive", n7), n7.origin === r11 && n7.data.name === t3 && e11(n7);
    };
  }(e10, r10, n6));
}

// node_modules/@liff/share-target-picker/lib/index.es.js
var I5 = function() {
  function i6() {
    this.payloadToShareTargetPicker = null, this.popupWindow = null, this.doesWaitForSubwindowResult = false;
  }
  return i6.getInstance = function() {
    return i6.instance ? i6.instance.reset() : i6.instance = new i6(), i6.instance;
  }, i6.prototype.init = function(i7) {
    return __awaiter(this, void 0, void 0, function() {
      var t2, r10;
      return __generator(this, function(e10) {
        switch (e10.label) {
          case 0:
            return e10.trys.push([0, 5, , 6]), this.liffId = i7.referrer.liffId, this.doesWaitForSubwindowResult = !(!i7.options || !i7.options.waitForSubwindowResult), this.allowPostMessageOrigin = this.initAllowPostMessageOrigin(), this.payloadToShareTargetPicker = this.buildPayloadToShareTargetPicker(i7), window.AbortController && (this.abortController = new window.AbortController()), this.prepareAnotherWindow(), [4, this.initOtt()];
          case 1:
            return e10.sent(), this.initListener(), this.openAnotherWindow(), this.doesWaitForSubwindowResult ? [4, this.pollingShareResult()] : [3, 3];
          case 2:
            return t2 = e10.sent(), this.finalize(), [2, t2];
          case 3:
          case 6:
            return [2];
          case 4:
            return [3, 6];
          case 5:
            if (r10 = e10.sent(), this.finalize(), "AbortError" !== r10.name)
              throw r10;
            return [3, 6];
        }
      });
    });
  }, i6.prototype.resetAllVariables = function() {
    this.liffId = "", this.allowPostMessageOrigin = "", this.payloadToShareTargetPicker = null, this.ott = "", this.popupWindow = null, this.timeoutIDForHealthCheck = null, this.abortController = null, this.internalError = null, this.doesWaitForSubwindowResult = false;
  }, i6.prototype.reset = function() {
    this.finalize(), this.resetAllVariables();
  }, i6.prototype.finalize = function() {
    var t2, e10;
    this.abortController && this.abortController.abort(), u3() || (t2 = this.timeoutIDForHealthCheck, e10 = this.popupWindow, s10(window, "message.receivedHealthcheck"), t2 && clearTimeout(t2), e10 && !e10.closed && e10.close());
  }, i6.prototype.buildPayloadToShareTargetPicker = function(t2) {
    return { messages: t2.messages, isMultiple: t2.isMultiple, referrer: t2.referrer };
  }, i6.prototype.initAllowPostMessageOrigin = function(t2) {
    return void 0 === t2 && (t2 = l7("shareTargetPicker")), S2(t2);
  }, i6.prototype.initOtt = function() {
    return __awaiter(this, void 0, void 0, function() {
      var t2, i7, r10;
      return __generator(this, function(e10) {
        switch (e10.label) {
          case 0:
            return this.abortController && (t2 = this.abortController.signal), i7 = "".concat(l7("shareTargetPickerOtt"), "/").concat(this.liffId, "/ott"), r10 = this, [4, f4(i7, { method: "GET", signal: t2 }).then(function(t3) {
              return t3.ott;
            })];
          case 1:
            return r10.ott = e10.sent(), [2];
        }
      });
    });
  }, i6.prototype.prepareAnotherWindow = function() {
    u3() || ("ios" !== e7() || $() ? this.popupWindow = window.open("", "liffpopup", "width=480, height=640, menubar=no, toolbar=no, scrollbars=yes") : this.popupWindow = window.open());
  }, i6.prototype.openAnotherWindow = function() {
    if (u3() && this.payloadToShareTargetPicker)
      t2 = this.liffId, e10 = this.ott, i7 = this.payloadToShareTargetPicker, o7 = { liffId: t2, ott: e10, data: JSON.stringify(i7), closeModals: false }, location.href = "".concat("line://picker", "?").concat(A2.stringify(o7));
    else {
      if (this.timeoutIDForHealthCheck = window.setTimeout(this.healthCheck.bind(this), 1e3), !this.popupWindow)
        throw m2(n3);
      !function(t3, e11, i8) {
        var r10 = { liffId: e11, ott: i8 };
        t3.location.href = "".concat(l7("shareTargetPicker"), "?").concat(A2.stringify(r10));
      }(this.popupWindow, this.liffId, this.ott);
    }
    var t2, e10, i7, o7;
  }, i6.prototype.initListener = function() {
    var t2, e10;
    u3() || (t2 = this.onReceivedHealthcheck.bind(this), e10 = this.allowPostMessageOrigin, m11(window, "receivedHealthcheck", t2, e10));
  }, i6.prototype.healthCheck = function() {
    return __awaiter(this, void 0, void 0, function() {
      var t2;
      return __generator(this, function(e10) {
        switch (e10.label) {
          case 0:
            if (this.popupWindow && !this.popupWindow.closed)
              return [3, 7];
            if (!this.doesWaitForSubwindowResult)
              return [3, 5];
            e10.label = 1;
          case 1:
            return e10.trys.push([1, 3, , 4]), [4, this.onCanceled()];
          case 2:
            return e10.sent(), [3, 4];
          case 3:
            return t2 = e10.sent(), this.internalError = t2, [3, 4];
          case 4:
            return [3, 6];
          case 5:
            this.finalize(), e10.label = 6;
          case 6:
            return [3, 8];
          case 7:
            i7 = this.popupWindow, r10 = this.allowPostMessageOrigin, u11(i7, "healthcheck", void 0, r10), this.timeoutIDForHealthCheck = window.setTimeout(this.healthCheck.bind(this), 1e3), e10.label = 8;
          case 8:
            return [2];
        }
        var i7, r10;
      });
    });
  }, i6.prototype.onReceivedHealthcheck = function() {
    if (!this.popupWindow || !this.payloadToShareTargetPicker)
      throw m2(n3);
    var t2, e10, i7;
    t2 = this.popupWindow, e10 = this.payloadToShareTargetPicker, i7 = this.allowPostMessageOrigin, u11(t2, "ready", e10, i7);
  }, i6.prototype.onCanceled = function() {
    return __awaiter(this, void 0, void 0, function() {
      var t2, i7;
      return __generator(this, function(e10) {
        switch (e10.label) {
          case 0:
            if (u3() || !this.ott)
              throw new Error("need to call with ott in client");
            return this.abortController && (t2 = this.abortController.signal), i7 = { liffId: this.liffId, ott: this.ott }, [4, f4("".concat(l7("shareTargetPickerResult"), "?").concat(A2.stringify(i7)), { method: "POST", signal: t2, headers: { Accept: "application/json", "Content-Type": "application/x-www-form-urlencoded" }, body: "result=CANCEL" })];
          case 1:
            return [2, "ok" === e10.sent().status];
        }
      });
    });
  }, i6.prototype.getShareResult = function() {
    return __awaiter(this, void 0, void 0, function() {
      var t2, i7;
      return __generator(this, function(e10) {
        if (!this.ott)
          throw new Error("need to call with ott in client");
        return this.abortController && (t2 = this.abortController.signal), i7 = { liffId: this.liffId, ott: this.ott }, i.debug("fetch: getShareResult"), [2, f4("".concat(l7("shareTargetPickerResult"), "?").concat(A2.stringify(i7)), { method: "GET", headers: { Accept: "application/json" }, signal: t2 })];
      });
    });
  }, i6.isPollingTimeOut = function(t2, e10) {
    return (e10 - t2) / 6e4 >= 10;
  }, i6.prototype.pollingShareResult = function() {
    return __awaiter(this, void 0, void 0, function() {
      var t2, r10;
      return __generator(this, function(e10) {
        switch (e10.label) {
          case 0:
            t2 = Date.now(), e10.label = 1;
          case 1:
            if (i6.isPollingTimeOut(t2, Date.now()))
              return [3, 4];
            if (this.internalError)
              throw this.internalError;
            return [4, this.getShareResult()];
          case 2:
            if ((r10 = e10.sent()) && r10.result)
              switch (r10.result) {
                case "SUCCESS":
                  return [2, { status: "success" }];
                case "CANCEL":
                  return [2];
                default:
                  throw new Error(r10.resultDescription);
              }
            return [4, new Promise(function(t3) {
              setTimeout(t3, 500);
            })];
          case 3:
            return e10.sent(), [3, 1];
          case 4:
            throw new Error("Timeout: not finished within ".concat(10, "min"));
        }
      });
    });
  }, i6;
}();
var A5 = function(r10) {
  function l12() {
    var i6 = null !== r10 && r10.apply(this, arguments) || this;
    return i6.shareTargetPicker = function(r11, l13) {
      return void 0 === l13 && (l13 = {}), __awaiter(i6, void 0, void 0, function() {
        var t2, i7, h6, c15, b7, y5, v7;
        return __generator(this, function(e10) {
          switch (e10.label) {
            case 0:
              if (C4.shareTargetPicker(), !r11 || !Array.isArray(r11) || 0 === r11.length)
                throw m2(I, "no proper argument");
              if (r11.length > c2)
                throw m2(I, "exceed the limit of num of messages");
              if (!(t2 = c5().liffId))
                throw m2(T);
              window.liff && (i7 = window.liff).analytics && m9(i7.analytics), h6 = void 0 === l13.isMultiple || l13.isMultiple, e10.label = 1;
            case 1:
              return e10.trys.push([1, 3, , 4]), c15 = I5.getInstance(), b7 = r5(), y5 = { waitForSubwindowResult: true }, u3() && b7 && f(b7, "10.11.0") < 0 && (y5.waitForSubwindowResult = false), [4, c15.init({ messages: r11, isMultiple: h6, referrer: { liffId: t2, url: location.origin }, options: y5 })];
            case 2:
              return [2, e10.sent()];
            case 3:
              throw (v7 = e10.sent()) instanceof h ? v7 : m2(N, v7.message);
            case 4:
              return [2];
          }
        });
      });
    }, i6;
  }
  return __extends(l12, r10), Object.defineProperty(l12.prototype, "name", { get: function() {
    return "shareTargetPicker";
  }, enumerable: false, configurable: true }), l12.prototype.install = function() {
    return this.shareTargetPicker;
  }, l12;
}(a);
var R4 = new A5();

// node_modules/@line/liff/index.mjs
var liffInstance = {};
var liff$1 = Object.defineProperties(liffInstance, {
  getOS: {
    value: e7,
    enumerable: true,
    writable: true
  },
  getVersion: {
    value: r4,
    enumerable: true,
    writable: true
  },
  getLanguage: {
    value: r9,
    enumerable: true,
    writable: true
  },
  isInClient: {
    value: u3,
    enumerable: true,
    writable: true
  },
  isLoggedIn: {
    value: e3,
    enumerable: true,
    writable: true
  },
  logout: {
    value: o4,
    enumerable: true,
    writable: true
  },
  getAccessToken: {
    value: x2,
    enumerable: true,
    writable: true
  },
  getIDToken: {
    value: X,
    enumerable: true,
    writable: true
  },
  getDecodedIDToken: {
    value: Z,
    enumerable: true,
    writable: true
  },
  getContext: {
    value: E2,
    enumerable: true,
    writable: true
  },
  openWindow: {
    value: p10,
    enumerable: true,
    writable: true
  },
  closeWindow: {
    value: r8,
    enumerable: true,
    writable: true
  },
  getFriendship: {
    value: R3(o6, "profile"),
    enumerable: true,
    writable: true
  },
  getAId: {
    value: y2,
    enumerable: true,
    writable: true
  },
  getProfilePlus: {
    value: S3,
    enumerable: true,
    writable: true
  },
  getIsVideoAutoPlay: {
    value: _2,
    enumerable: true,
    writable: true
  },
  getLineVersion: {
    value: r5,
    enumerable: true,
    writable: true
  },
  isApiAvailable: {
    value: T4,
    enumerable: true,
    writable: true
  },
  getProfile: {
    value: R3(n4, "profile"),
    enumerable: true,
    writable: true
  },
  sendMessages: {
    value: R3(l10, "chat_message.write"),
    enumerable: true,
    writable: true
  },
  subWindow: {
    value: Pe,
    enumerable: true,
    writable: true
  },
  ready: {
    value: n2,
    enumerable: true,
    writable: true
  },
  id: {
    get: function() {
      return c5().liffId || null;
    },
    enumerable: true
  },
  _dispatchEvent: {
    value: v6,
    enumerable: true,
    writable: true
  },
  _call: {
    value: m7,
    enumerable: true,
    writable: true
  },
  _addListener: {
    value: s6,
    enumerable: true,
    writable: true
  },
  _removeListener: {
    value: u7,
    enumerable: true,
    writable: true
  },
  _postMessage: {
    value: p8,
    enumerable: true,
    writable: true
  }
});
var driver = new u();
var contextHolder = new s(driver, liff$1);
var use = new c(driver, contextHolder).install();
function applyModule(module) {
  use.call(liff$1, module);
}
[
  new c(driver, contextHolder),
  new b5(),
  new st(),
  new I4(),
  c13,
  g7,
  p4,
  z3,
  R4,
  h5,
  new f3()
].forEach(applyModule);
var liff = liff$1;
export {
  liff as default,
  liff
};
//# sourceMappingURL=@line_liff.js.map
